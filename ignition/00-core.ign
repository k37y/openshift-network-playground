{
  "ignition": {
    "version": "3.0.0"
  },
  "passwd": {
    "groups": [
      {
        "name": "libvirtd"
      }
    ],
    "users": [
      {
        "gecos": "CoreOS Admin",
        "groups": [
          "sudo",
          "wheel",
          "adm",
          "systemd-journal"
        ],
        "name": "core"
      },
      {
        "gecos": "OpenShift Network Playground User",
        "groups": [
          "sudo",
          "wheel",
          "adm",
          "systemd-journal",
          "libvirtd"
        ],
        "name": "onp",
        "passwordHash": "$y$j9T$PNaoSZJskJ6WwR/2iS78a0$/6.dOJ1S2UWLMz0F/1mJvNN4dH3EZ1Y68hLfBsODgi0"
      }
    ]
  },
  "storage": {
    "directories": [
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground",
        "user": {
          "name": "onp"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/rhcos_image_cache",
        "user": {
          "name": "onp"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.local/bin",
        "user": {
          "name": "onp"
        },
        "mode": 493
      }
    ],
    "files": [
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/vbmc/ssh/config",
        "contents": {
          "source": "data:,StrictHostKeyChecking%20no%0A"
        },
        "mode": 420
      },
      {
        "group": {
          "id": 1001
        },
        "overwrite": true,
        "path": "/opt/openshift-network-playground/vbmc/config/master0/config",
        "user": {
          "id": 1001
        },
        "contents": {
          "source": "data:,%5BVirtualBMC%5D%0Ausername%20%3D%20admin%0Apassword%20%3D%20password%0Aaddress%20%3D%20192.168.123.1%0Aport%20%3D%206230%0Adomain_name%20%3D%20master0%0Alibvirt_uri%20%3D%20qemu%2Bssh%3A%2F%2Fonp%40192.168.123.1%2Fsystem%0Aactive%20%3D%20True%0A"
        },
        "mode": 420
      },
      {
        "group": {
          "id": 1001
        },
        "overwrite": true,
        "path": "/opt/openshift-network-playground/vbmc/config/master1/config",
        "user": {
          "id": 1001
        },
        "contents": {
          "source": "data:,%5BVirtualBMC%5D%0Ausername%20%3D%20admin%0Apassword%20%3D%20password%0Aaddress%20%3D%20192.168.123.1%0Aport%20%3D%206231%0Adomain_name%20%3D%20master1%0Alibvirt_uri%20%3D%20qemu%2Bssh%3A%2F%2Fonp%40192.168.123.1%2Fsystem%0Aactive%20%3D%20True%0A"
        },
        "mode": 420
      },
      {
        "group": {
          "id": 1001
        },
        "overwrite": true,
        "path": "/opt/openshift-network-playground/vbmc/config/master2/config",
        "user": {
          "id": 1001
        },
        "contents": {
          "source": "data:,%5BVirtualBMC%5D%0Ausername%20%3D%20admin%0Apassword%20%3D%20password%0Aaddress%20%3D%20192.168.123.1%0Aport%20%3D%206232%0Adomain_name%20%3D%20master2%0Alibvirt_uri%20%3D%20qemu%2Bssh%3A%2F%2Fonp%40192.168.123.1%2Fsystem%0Aactive%20%3D%20True%0A"
        },
        "mode": 420
      },
      {
        "group": {
          "id": 1001
        },
        "overwrite": true,
        "path": "/opt/openshift-network-playground/vbmc/config/worker0/config",
        "user": {
          "id": 1001
        },
        "contents": {
          "source": "data:,%5BVirtualBMC%5D%0Ausername%20%3D%20admin%0Apassword%20%3D%20password%0Aaddress%20%3D%20192.168.123.1%0Aport%20%3D%206233%0Adomain_name%20%3D%20worker0%0Alibvirt_uri%20%3D%20qemu%2Bssh%3A%2F%2Fonp%40192.168.123.1%2Fsystem%0Aactive%20%3D%20True%0A"
        },
        "mode": 420
      },
      {
        "group": {
          "id": 1001
        },
        "overwrite": true,
        "path": "/opt/openshift-network-playground/vbmc/config/worker1/config",
        "user": {
          "id": 1001
        },
        "contents": {
          "source": "data:,%5BVirtualBMC%5D%0Ausername%20%3D%20admin%0Apassword%20%3D%20password%0Aaddress%20%3D%20192.168.123.1%0Aport%20%3D%206234%0Adomain_name%20%3D%20worker1%0Alibvirt_uri%20%3D%20qemu%2Bssh%3A%2F%2Fonp%40192.168.123.1%2Fsystem%0Aactive%20%3D%20True%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/resolv.conf",
        "contents": {
          "source": "data:,"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/sudoers.d/onp",
        "contents": {
          "source": "data:,onp%20ALL%3D(ALL)%20NOPASSWD%3A%20ALL%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/polkit-1/localauthority/50-local.d/50-onp-libvirt-remote-access.pkla",
        "contents": {
          "source": "data:,%5BRemote%20libvirt%20SSH%20access%5D%0AIdentity%3Dunix-user%3Aonp%0AAction%3Dorg.libvirt.unix.manage%0AResultAny%3Dyes%0AResultInactive%3Dyes%0AResultActive%3Dyes%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/libvirt/libvirt.conf",
        "contents": {
          "source": "data:,uri_default%20%3D%20%22qemu%3A%2F%2F%2Fsystem%22%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/sysctl.d/99-sysctl.conf",
        "contents": {
          "source": "data:,net.ipv4.ip_forward%20%3D%201%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/ssh/sshd_config.d/20-enable-passwords.conf",
        "contents": {
          "source": "data:,PasswordAuthentication%20yes%0A"
        },
        "mode": 420
      },
      {
        "path": "/opt/openshift-network-playground/host/configure.sh",
        "contents": {
          "source": "data:,%23!%2Fbin%2Fsh%0A%2Fusr%2Fsbin%2Fiptables%20-t%20nat%20-I%20POSTROUTING%20-s%20192.168.123.0%2F24%20!%20-d%20192.168.123.0%2F24%20-j%20MASQUERADE%0A%2Fusr%2Fsbin%2Fiptables%20-t%20nat%20-I%20POSTROUTING%20-s%20192.168.124.0%2F24%20!%20-d%20192.168.124.0%2F24%20-j%20MASQUERADE%0A%2Fusr%2Fsbin%2Fiptables%20-t%20nat%20-I%20POSTROUTING%20-s%20192.168.125.0%2F24%20!%20-d%20192.168.125.0%2F24%20-j%20MASQUERADE%0A%2Fusr%2Fbin%2Fecho%201%20%3E%20%2Fproc%2Fsys%2Fnet%2Fipv6%2Fconf%2F%24(ip%20-o%20-4%20route%20show%20default%20%7C%20awk%20'%7Bprint%20%245%7D')%2Fdisable_ipv6%0A%2Fusr%2Fsbin%2Fiptables%20-t%20nat%20-I%20PREROUTING%20-p%20tcp%20-i%20%24(%2Fusr%2Fsbin%2Fip%20r%20%7C%20grep%20default%20%7C%20awk%20'%7Bprint%20%245%7D'%20%7C%20head%20-n%201)%20--dport%20443%20-j%20DNAT%20--to-destination%20192.168.123.89%3A443%0A%2Fusr%2Fsbin%2Fiptables%20-t%20nat%20-I%20PREROUTING%20-p%20tcp%20-i%20%24(%2Fusr%2Fsbin%2Fip%20r%20%7C%20grep%20default%20%7C%20awk%20'%7Bprint%20%245%7D'%20%7C%20head%20-n%201)%20--dport%2080%20-j%20DNAT%20--to-destination%20192.168.123.89%3A80%0A%2Fusr%2Fsbin%2Fiptables%20-t%20nat%20-I%20PREROUTING%20-p%20tcp%20-i%20%24(%2Fusr%2Fsbin%2Fip%20r%20%7C%20grep%20default%20%7C%20awk%20'%7Bprint%20%245%7D'%20%7C%20head%20-n%201)%20--dport%206443%20-j%20DNAT%20--to-destination%20192.168.123.88%3A6443%0A%2Fusr%2Fbin%2Ftest%20-f%20%2Fopt%2Fopenshift-network-playground%2Fvbmc%2Fssh%2Fid_rsa%20%7C%7C%20(ssh-keygen%20-N%20''%20-f%20%2Fopt%2Fopenshift-network-playground%2Fvbmc%2Fssh%2Fid_rsa%20%26%26%20mkdir%20-p%20%2Fhome%2Fonp%2F.ssh%20%26%26%20cp%20%2Fopt%2Fopenshift-network-playground%2Fvbmc%2Fssh%2Fid_rsa.pub%20%2Fhome%2Fonp%2F.ssh%2Fauthorized_keys%20%26%26%20chown%20onp%3Aonp%20-R%20%2Fhome%2Fonp%2F.ssh)%0A%2Fusr%2Fbin%2Ftest%20-f%20%2Fopt%2Fopenshift-network-playground%2Fcockpit-ws.done%20%7C%7C%20(%2Fusr%2Fbin%2Ftest%20-d%20%2Fusr%2Fshare%2Fcockpit%20%26%26%20podman%20container%20runlabel%20--name%20cockpit-ws%20RUN%20quay.io%2Fcockpit%2Fws%20%26%26%20podman%20container%20runlabel%20INSTALL%20quay.io%2Fcockpit%2Fws%20%26%26%20systemctl%20enable%20--now%20cockpit.service%20%26%26%20touch%20%2Fopt%2Fopenshift-network-playground%2Fcockpit-ws.done)%0A%2Fusr%2Fbin%2Fchown%20-R%20onp%3Aonp%20%2Fhome%2Fonp%2F.local%0A"
        },
        "mode": 493
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/ens3.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dens3%0Atype%3Dethernet%0Aautoconnect%3Dyes%0Ainterface-name%3Dens3%0A%5Bipv4%5D%0Amethod%3Dauto%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/baremetal-dummy.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dbaremetal-dummy%0Atype%3Ddummy%0Ainterface-name%3Dbaremetal-dummy%0Aautoconnect%3Dyes%0Amaster%3Dbaremetal%0Aslave-type%3Dbridge%0A%5Bipv4%5D%0Amethod%3Dlink-local%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/baremetal.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dbaremetal%0Atype%3Dbridge%0Aautoconnect%3Dyes%0Ainterface-name%3Dbaremetal%0A%5Bipv4%5D%0Amethod%3Dmanual%0Aaddresses%3D192.168.123.1%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A%5Bbridge%5D%0Amac-address%3D52%3A54%3A00%3A11%3A22%3Aa0%0Ainterface-name%3Dbaremetal%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/baremetal-slave.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dbaremetal-slave%0Atype%3Dethernet%0Ainterface-name%3Dbaremetal-dummy%0Amaster%3Dbaremetal%0Aautoconnect%3Dyes%0Aslave-type%3Dbridge%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/provision-dummy.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dprovision-dummy%0Atype%3Ddummy%0Ainterface-name%3Dprovision-dummy%0Aautoconnect%3Dyes%0Amaster%3Dprovisioning%0Aslave-type%3Dbridge%0A%5Bipv4%5D%0Amethod%3Dlink-local%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/provisioning.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dprovisioning%0Atype%3Dbridge%0Ainterface-name%3Dprovisioning%0Aautoconnect%3Dyes%0A%5Bipv4%5D%0Amethod%3Dmanual%0Aaddresses%3D172.22.0.254%2F24%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A%5Bbridge%5D%0Amac-address%3D52%3A54%3A00%3A11%3A22%3Ab0%0Ainterface-name%3Dprovisioning%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/provisioning-slave.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dprovisioning-slave%0Atype%3Dethernet%0Ainterface-name%3Dprovision-dummy%0Amaster%3Dprovisioning%0Aautoconnect%3Dyes%0Aslave-type%3Dbridge%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/onp1-dummy.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Donp1-dummy%0Atype%3Ddummy%0Ainterface-name%3Donp1-dummy%0Aautoconnect%3Dyes%0Amaster%3Donp1%0Aslave-type%3Dbridge%0A%5Bipv4%5D%0Amethod%3Dlink-local%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/onp1.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Donp1%0Atype%3Dbridge%0Aautoconnect%3Dyes%0Ainterface-name%3Donp1%0A%5Bipv4%5D%0Amethod%3Dmanual%0Aaddresses%3D192.168.124.1%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A%5Bbridge%5D%0Amac-address%3D52%3A54%3A00%3A11%3A22%3Ac0%0Ainterface-name%3Donp1%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/onp1-slave.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Donp1-slave%0Atype%3Dethernet%0Ainterface-name%3Donp1-dummy%0Amaster%3Donp1%0Aautoconnect%3Dyes%0Aslave-type%3Dbridge%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/onp2-dummy.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Donp2-dummy%0Atype%3Ddummy%0Ainterface-name%3Donp2-dummy%0Aautoconnect%3Dyes%0Amaster%3Donp2%0Aslave-type%3Dbridge%0A%5Bipv4%5D%0Amethod%3Dlink-local%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/onp2.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Donp2%0Atype%3Dbridge%0Aautoconnect%3Dyes%0Ainterface-name%3Donp2%0A%5Bipv4%5D%0Amethod%3Dmanual%0Aaddresses%3D192.168.125.1%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A%5Bbridge%5D%0Amac-address%3D52%3A54%3A00%3A11%3A22%3Ad0%0Ainterface-name%3Donp2%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/onp2-slave.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Donp2-slave%0Atype%3Dethernet%0Ainterface-name%3Donp2-dummy%0Amaster%3Donp2%0Aautoconnect%3Dyes%0Aslave-type%3Dbridge%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/sno0-dummy.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dsno0-dummy%0Atype%3Ddummy%0Ainterface-name%3Dsno0-dummy%0Aautoconnect%3Dyes%0Amaster%3Dsno0%0Aslave-type%3Dbridge%0A%5Bipv4%5D%0Amethod%3Dlink-local%0A%5Bipv6%5D%0Amethod%3Ddisabled%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/sno0-slave.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dsno0-slave%0Atype%3Dethernet%0Ainterface-name%3Dsno0-dummy%0Amaster%3Dsno0%0Aautoconnect%3Dyes%0Aslave-type%3Dbridge%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/system-connections/sno0.nmconnection",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dsno0%0Atype%3Dbridge%0Aautoconnect%3Dyes%0Ainterface-name%3Dsno0%0A%5Bipv4%5D%0Amethod%3Dmanual%0Aaddresses%3D192.168.126.1%0A%5Bipv6%5D%0Amethod%3Dmanual%0Aaddresses%3Dfd00%3Adead%3Abeef%3A%3A1%2F96%0A%5Bbridge%5D%0Amac-address%3D52%3A54%3A00%3A11%3A22%3Ae0%0Ainterface-name%3Dsno0%0A"
        },
        "mode": 384
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/conf.d/openshift-network-playground.conf",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,%5Bmain%5D%0Aplugins%3Dkeyfile%0Adns%3Ddnsmasq%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/NetworkManager/dnsmasq.d/openshift-network-playground.conf",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,address%3D%2F.apps.ocp.example.local%2F192.168.123.89%0Aaddress%3D%2F.apps.sno.example.local%2F192.168.124.2%0Aaddress%3D%2F.apps.sno.example.local%2Ffd00%3Adead%3Abeef%3A%3A2%0Aaddn-hosts%3D%2Fetc%2Fhosts%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/etc/hosts",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "data:,127.0.0.1%20localhost%20localhost.localdomain%20openshift-network-playground.ocp.example.local%0A192.168.123.88%20api.ocp.example.local%0A192.168.123.90%20bootstrap.ocp.example.local%0A192.168.123.91%20master0.ocp.example.local%0A192.168.123.92%20master1.ocp.example.local%0A192.168.123.93%20master2.ocp.example.local%0A192.168.123.94%20worker0.ocp.example.local%0A192.168.123.95%20worker1.ocp.example.local%0A192.168.123.1%20openshift-network-playground.ocp.example.local%20lb.ocp.example.local%20mirror.ocp.example.local%20proxy.ocp.example.local%0A192.168.126.2%20api.sno.example.local%20api-int.sno.example.local%20node.sno.example.local%0Afd00%3Adead%3Abeef%3A%3A2%20api.sno.example.local%20api-int.sno.example.local%20node.sno.example.local%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/zincati/config.d/90-disable-auto-updates.toml",
        "contents": {
          "source": "data:,%5Bupdates%5D%0Aenabled%20%3D%20false%0A"
        }
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/opt/openshift-network-playground/libvirt/create-vm.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%23%20Create%20node%20for%20openshift-network-playground%0A%0Aset%20-euxo%20pipefail%0A%0AVM_NAME%3D%241%0AMAC1%3D%242%0AMAC2%3D%243%0AVM_DIR%3D%2Fopt%2Fopenshift-network-playground%2Flibvirt%0AVM_DISK%3D%24VM_DIR%2F%24VM_NAME%2F%24VM_NAME.img%0AVCPU%3D%24%7B4%3A-4%7D%0AMEMORY%3D%24%7B5%3A-16384%7D%0ANETWORK1%3Dbridge%3Dprovisioning%2Cmac%3D%24MAC1%0ANETWORK2%3Dbridge%3Dbaremetal%2Cmac%3D%24MAC2%0A%0Aif%20virsh%20list%20%7C%20grep%20%24VM_NAME%202%3E%261%3E%2Fdev%2Fnull%3B%20then%20virsh%20destroy%20%24VM_NAME%202%3E%2Fdev%2Fnull%3B%20virsh%20undefine%20%24VM_NAME%202%3E%2Fdev%2Fnull%3B%20fi%0Aif%20virsh%20list%20--all%20%7C%20grep%20%24VM_NAME%202%3E%261%3E%2Fdev%2Fnull%3B%20then%20virsh%20undefine%20%24VM_NAME%202%3E%2Fdev%2Fnull%3B%20fi%0Aif%20%5B%20!%20-f%20%24VM_DISK%20%5D%20%3B%20then%20mkdir%20-p%20%24VM_DIR%2F%24VM_NAME%3B%20qemu-img%20create%20%24VM_DISK%20120G%3B%20fi%0A%0Avirsh%20define%20%3C(virt-install%20--name%20%24VM_NAME%20%5C%0A%20%20%20%20%20%20%20%20--os-variant%20fedora-coreos-stable%20%5C%0A%20%20%20%20%20%20%20%20--vcpus%20%24VCPU%20%5C%0A%20%20%20%20%20%20%20%20--memory%20%24MEMORY%20%5C%0A%20%20%20%20%20%20%20%20--disk%20%24VM_DISK%20%5C%0A%20%20%20%20%20%20%20%20--network%20%24NETWORK1%20%5C%0A%20%20%20%20%20%20%20%20--network%20%24NETWORK2%20%5C%0A%20%20%20%20%20%20%20%20--pxe%20%5C%0A%20%20%20%20%20%20%20%20--boot%20network%2Chd%20%5C%0A%20%20%20%20%20%20%20%20--graphics%20spice%2Clisten%3D0.0.0.0%20%5C%0A%20%20%20%20%20%20%20%20--video%20virtio%20%5C%0A%20%20%20%20%20%20%20%20--channel%20spicevmc%20%5C%0A%20%20%20%20%20%20%20%20--console%20pty%2Ctarget.type%3Dvirtio%20%5C%0A%20%20%20%20%20%20%20%20--serial%20pty%20%5C%0A%20%20%20%20%20%20%20%20--noautoconsole%20%5C%0A%20%20%20%20%20%20%20%20--print-xml%202)%0Atouch%20%2Fopt%2Fopenshift-network-playground%2F%24VM_NAME.done%0A"
        },
        "mode": 493
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dhcp/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0ARUN%20yum%20install%20-y%20dnsmasq%0AADD%20dnsmasq.conf%20%2Fdnsmasq.conf%0AENTRYPOINT%20%5B%22dnsmasq%22%5D%0ACMD%20%5B%22-C%22%2C%20%22%2Fdnsmasq.conf%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dhcp/dnsmasq.conf",
        "contents": {
          "source": "data:,no-daemon%0Ainterface%3Dbaremetal%0Adhcp-range%3D192.168.123.2%2C192.168.123.254%2C255.255.255.0%0Aexcept-interface%3Dlo%0Abind-interfaces%0Alog-dhcp%0Adhcp-authoritative%0Alog-async%0Adhcp-host%3D52%3A54%3A00%3A11%3A22%3Aa1%2Cmaster0.ocp.example.local%2C192.168.123.91%0Adhcp-host%3D52%3A54%3A00%3A11%3A22%3Aa2%2Cmaster1.ocp.example.local%2C192.168.123.92%0Adhcp-host%3D52%3A54%3A00%3A11%3A22%3Aa3%2Cmaster2.ocp.example.local%2C192.168.123.93%0Adhcp-host%3D52%3A54%3A00%3A11%3A22%3Aa4%2Cworker0.ocp.example.local%2C192.168.123.94%0Adhcp-host%3D52%3A54%3A00%3A11%3A22%3Aa5%2Cworker1.ocp.example.local%2C192.168.123.95%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/pxe/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0ARUN%20yum%20install%20-y%20dnsmasq%0AADD%20dnsmasq.conf%20%2Fdnsmasq.conf%0AENTRYPOINT%20%5B%22dnsmasq%22%5D%0ACMD%20%5B%22-C%22%2C%20%22%2Fdnsmasq.conf%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/pxe/dnsmasq.conf",
        "contents": {
          "source": "data:,no-daemon%0Ainterface%3Dprovisioning%0Adhcp-range%3D172.22.0.3%2C172.22.0.253%2C255.255.255.0%0Aexcept-interface%3Dlo%0Abind-interfaces%0Alog-dhcp%0Alog-queries%0Adhcp-authoritative%0Alog-async%0Aenable-tftp%0Adhcp-userclass%3Dset%3Aipxe%2CiPXE%0Adhcp-boot%3Dtag%3Aipxe%2Chttp%3A%2F%2F172.22.0.2%2Fboot.ipxe%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/onp1-dhcp/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0ARUN%20yum%20install%20-y%20dnsmasq%0AADD%20dnsmasq.conf%20%2Fdnsmasq.conf%0AENTRYPOINT%20%5B%22dnsmasq%22%5D%0ACMD%20%5B%22-C%22%2C%20%22%2Fdnsmasq.conf%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/onp1-dhcp/dnsmasq.conf",
        "contents": {
          "source": "data:,no-daemon%0Ainterface%3Donp1%0Adhcp-range%3D192.168.124.2%2C192.168.124.254%2C255.255.255.0%0Aexcept-interface%3Dlo%0Abind-interfaces%0Alog-dhcp%0Adhcp-authoritative%0Alog-async%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/onp2-dhcp/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0ARUN%20yum%20install%20-y%20dnsmasq%0AADD%20dnsmasq.conf%20%2Fdnsmasq.conf%0AENTRYPOINT%20%5B%22dnsmasq%22%5D%0ACMD%20%5B%22-C%22%2C%20%22%2Fdnsmasq.conf%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/onp2-dhcp/dnsmasq.conf",
        "contents": {
          "source": "data:,no-daemon%0Ainterface%3Donp2%0Adhcp-range%3D192.168.125.2%2C192.168.125.254%2C255.255.255.0%0Aexcept-interface%3Dlo%0Abind-interfaces%0Alog-dhcp%0Adhcp-authoritative%0Alog-async%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/nat64/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0AADD%20env%20entrypoint.sh%20%2F%0ARUN%20yum%20install%20-y%20%5C%0A%20%20%20%20%20%20%20%20iproute%20%5C%0A%20%20%20%20%20%20%20%20iptables%20%5C%0A%20%20%20%20%20%20%20%20make%20%5C%0A%20%20%20%20%20%20%20%20gcc%20%5C%0A%20%20%20%20%20%20%20%20bzip2%20%5C%0A%20%20%20%20%20%20%20%20bind%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20curl%20-O%20http%3A%2F%2Fwww.litech.org%2Ftayga%2Ftayga-0.9.2.tar.bz2%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20bzip2%20-dk%20tayga-0.9.2.tar.bz2%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20tar%20xfv%20tayga-0.9.2.tar%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20pushd%20tayga-0.9.2%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20.%2Fconfigure%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20make%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20make%20install%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20popd%20%26%26%20%5C%0A%20%20%20%20%20%20%20%20chmod%20%2Bx%20%2Fentrypoint.sh%0AENTRYPOINT%20%5B%22%2Fentrypoint.sh%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/nat64/entrypoint.sh",
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%0Asource%20%2Fenv%0A%0A%23%20Create%20Tayga%20directories.%0Amkdir%20-p%20%24%7BTDATADIR%7D%20%24%7BTCONFDIR%7D%0A%0A%23%20Configure%20Tayga.%0Acat%20%3C%3C%20EOF%20%3E%20%24%7BTCONFDIR%7D%2Ftayga.conf%0Atun-device%20nat64%0Aipv4-addr%20%24%7BTIP4ADDR%7D%0Aipv6-addr%20%24%7BTIP6ADDR%7D%0Aprefix%20%24%7BTPREFIX%7D%0Adynamic-pool%20%24%7BTDPOOL%7D%0Adata-dir%20%24%7BTDATADIR%7D%0AEOF%0A%0A%23%20Setup%20Tayga%20networking.%0Aip%20link%20del%20dev%20%24%7BTINT%7D%202%3E%2Fdev%2Fnull%0Atayga%20-c%20%24%7BTCONFDIR%7D%2Ftayga.conf%20--mktun%0Aip%20link%20set%20dev%20%24%7BTINT%7D%20up%0Aip%20route%20del%20%24%7BTDPOOL%7D%20dev%20%24%7BTINT%7D%202%3E%2Fdev%2Fnull%0Aip%20route%20add%20%24%7BTDPOOL%7D%20dev%20%24%7BTINT%7D%0Aip%20-6%20route%20del%20%24%7BTPREFIX%7D%20dev%20%24%7BTINT%7D%202%3E%2Fdev%2Fnull%0Aip%20-6%20route%20add%20%24%7BTPREFIX%7D%20dev%20%24%7BTINT%7D%0A%0A%23%20Run%20tayga%0Aecho%20%22Starting%20tayga%20...%22%0Atayga%20-c%20%24%7BTCONFDIR%7D%2Ftayga.conf%20-d%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/nat64/env",
        "contents": {
          "source": "data:,TIP4ADDR%3D192.168.126.1%0ATIP6ADDR%3Dfd00%3Adead%3Abeef%3A%3A1%0ATPREFIX%3D2001%3Adb8%3A1%3Affff%3A%3A%2F96%0ATDPOOL%3D192.168.126.128%2F25%0ATDATADIR%3D%2Fvar%2Fdb%2Ftayga%0ATCONFDIR%3D%2Fusr%2Flocal%2Fetc%0ATINT%3Dnat64%0ATVMINT%3Dsno0%0ATMAININT%3D%24(ip%20-o%20-4%20route%20show%20default%20%7C%20awk%20'%7Bprint%20%245%7D'%20%7C%20head%20-n%201)%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/nat64/host.sh",
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%0ADIR%3D%24(%20cd%20--%20%24(%20dirname%20--%20%24%7BBASH_SOURCE%5B0%5D%3A-%240%7D%3B%20)%20%26%3E%20%2Fdev%2Fnull%20%26%26%20pwd%202%3E%20%2Fdev%2Fnull%3B%20)%0Asource%20%24%7BDIR%7D%2Fenv%0A%0Aecho%201%20%7C%20sudo%20tee%20%2Fproc%2Fsys%2Fnet%2Fipv4%2Fip_forward%0Aecho%201%20%7C%20sudo%20tee%20%2Fproc%2Fsys%2Fnet%2Fipv6%2Fconf%2Fall%2Fforwarding%0Aecho%202%20%7C%20sudo%20tee%20%2Fproc%2Fsys%2Fnet%2Fipv6%2Fconf%2Fall%2Faccept_ra%0A%0Asudo%20iptables%20-t%20nat%20-C%20POSTROUTING%20-o%20%24%7BTINT%7D%20-j%20MASQUERADE%20%7C%7C%20%5C%0Asudo%20iptables%20-t%20nat%20-I%20POSTROUTING%20-o%20%24%7BTINT%7D%20-j%20MASQUERADE%0Asudo%20iptables%20-t%20nat%20-C%20POSTROUTING%20-o%20%24%7BTMAININT%7D%20-j%20MASQUERADE%20%7C%7C%20%5C%0Asudo%20iptables%20-t%20nat%20-I%20POSTROUTING%20-o%20%24%7BTMAININT%7D%20-j%20MASQUERADE%0Asudo%20iptables%20-C%20FORWARD%20-i%20%24%7BTVMINT%7D%20-o%20%24%7BTINT%7D%20-j%20ACCEPT%20%7C%7C%20%5C%0Asudo%20iptables%20-I%20FORWARD%20-i%20%24%7BTVMINT%7D%20-o%20%24%7BTINT%7D%20-j%20ACCEPT%0Asudo%20iptables%20-C%20FORWARD%20-o%20%24%7BTVMINT%7D%20-i%20%24%7BTINT%7D%20-j%20ACCEPT%20%7C%7C%20%5C%0Asudo%20iptables%20-I%20FORWARD%20-o%20%24%7BTVMINT%7D%20-i%20%24%7BTINT%7D%20-j%20ACCEPT%0A"
        },
        "mode": 493
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dns64/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0ACOPY%20named.conf%20%5C%0A%20%20%20%20sno.example.local.forward%20%5C%0A%20%20%20%20sno.example.local.reverse%20%5C%0A%20%20%20%20sno.example.local.reverse.v6%20%5C%0A%20%20%20%20%2F%0ARUN%20yum%20install%20-y%20bind%0AENTRYPOINT%20%5B%22%2Fusr%2Fsbin%2Fnamed%22%2C%20%22-c%22%2C%20%22%2Fnamed.conf%22%2C%20%22-g%22%2C%20%22-u%22%2C%20%22named%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dns64/named.conf",
        "contents": {
          "source": "data:,options%20%7B%0Alisten-on%20port%2053%20%7B%20192.168.126.1%3B%20%7D%3B%0Alisten-on-v6%20port%2053%20%7B%20fd00%3Adead%3Abeef%3A%3A1%3B%20%7D%3B%0Adirectory%20%20%20%20%20%20%20%22%2Fvar%2Fnamed%22%3B%0Aallow-query%20%20%20%20%20%7B%20192.168.126.0%2F24%3B%20fd00%3Adead%3Abeef%3A%3A%2F96%3B%20%7D%3B%0Aforwarders%20%7B%20127.0.0.1%3B%20%7D%3B%0Adns64%202001%3Adb8%3A1%3Affff%3A%3A%2F96%20%7B%0A%20%20%20%20%20%20%20%20clients%20%7B%20fd00%3Adead%3Abeef%3A%3A%2F96%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20exclude%20%7B%20!fd00%3Adead%3Abeef%3A%3A%2F96%3B%20any%3B%20%7D%3B%0A%7D%3B%0Arecursion%20yes%3B%0A%7D%3B%0A%0Azone%20%22sno.example.local%22%20IN%20%7B%0A%20%20%20%20%20%20%20%20type%20master%3B%0A%20%20%20%20%20%20%20%20file%20%22%2Fsno.example.local.forward%22%3B%0A%7D%3B%0A%0Azone%20%22126.168.192.in-addr.arpa%22%20IN%20%7B%0A%20%20%20%20%20%20%20%20type%20master%3B%0A%20%20%20%20%20%20%20%20file%20%22%2Fsno.example.local.reverse%22%3B%0A%7D%3B%0A%0Azone%20%220.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.f.e.e.b.d.a.e.d.0.0.d.f.ip6.arpa%22%20IN%20%7B%0A%20%20%20%20%20%20%20%20type%20master%3B%0A%20%20%20%20%20%20%20%20file%20%22%2Fsno.example.local.reverse.v6%22%3B%0A%7D%3B%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dns64/sno.example.local.forward",
        "contents": {
          "source": "data:,%24TTL%2086400%0A%40%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20SOA%20%20%20%20%20ns1.sno.example.local.%20root%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202001062501%20%20%3B%20serial%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2021600%20%20%20%20%20%20%20%3B%20refresh%20after%206%20hours%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%203600%20%20%20%20%20%20%20%20%3B%20retry%20after%201%20hour%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20604800%20%20%20%20%20%20%3B%20expire%20after%201%20week%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2086400%20)%20%20%20%20%20%3B%20minimum%20TTL%20of%201%20day%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20NS%20%20%20%20%20%20ns1.sno.example.local.%0A%0Ans1%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20A%20%20%20%20%20%20%20192.168.126.1%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20AAAA%20%20%20%20fd00%3Adead%3Abeef%3A%3A1%0Adns%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20A%20%20%20%20%20%20%20192.168.126.1%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20AAAA%20%20%20%20fd00%3Adead%3Abeef%3A%3A1%0Anode%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20A%20%20%20%20%20%20%20192.168.126.2%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20AAAA%20%20%20%20fd00%3Adead%3Abeef%3A%3A2%0Aapi%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20A%20%20%20%20%20%20%20192.168.126.2%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20AAAA%20%20%20%20fd00%3Adead%3Abeef%3A%3A2%0Aapi-int%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20A%20%20%20%20%20%20%20192.168.126.2%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20AAAA%20%20%20%20fd00%3Adead%3Abeef%3A%3A2%0A*.apps%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20A%20%20%20%20%20%20%20192.168.126.2%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20AAAA%20%20%20%20fd00%3Adead%3Abeef%3A%3A2%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dns64/sno.example.local.reverse",
        "contents": {
          "source": "data:,%24TTL%2086400%0A%40%20%20%20%20%20%20%20IN%20%20%20%20%20%20SOA%20%20%20%20%20ns1.sno.example.local.%20root%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202001062501%20%20%3B%20serial%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2021600%20%20%20%20%20%20%20%3B%20refresh%20after%206%20hours%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%203600%20%20%20%20%20%20%20%20%3B%20retry%20after%201%20hour%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20604800%20%20%20%20%20%20%3B%20expire%20after%201%20week%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2086400%20)%20%20%20%20%20%3B%20minimum%20TTL%20of%201%20day%0A%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20NS%20%20%20%20%20%20ns1.sno.example.local.%0A%0A1%20%20%20%20%20%20%20IN%20%20%20%20%20%20PTR%20%20%20%20%20ns1.sno.example.local.%0A2%20%20%20%20%20%20%20IN%20%20%20%20%20%20PTR%20%20%20%20%20node.sno.example.local.%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/dns64/sno.example.local.reverse.v6",
        "contents": {
          "source": "data:,%24TTL%2086400%0A%40%20%20%20%20%20%20%20IN%20%20%20%20%20%20SOA%20%20%20%20%20ns1.sno.example.local.%20root%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202001062501%20%20%3B%20serial%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2021600%20%20%20%20%20%20%20%3B%20refresh%20after%206%20hours%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%203600%20%20%20%20%20%20%20%20%3B%20retry%20after%201%20hour%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20604800%20%20%20%20%20%20%3B%20expire%20after%201%20week%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2086400%20)%20%20%20%20%20%3B%20minimum%20TTL%20of%201%20day%0A%20%20%20%20%20%20%20%20IN%20%20%20%20%20%20NS%20%20%20%20%20%20ns1.sno.example.local.%0A%0A1%20%20%20%20%20%20%20IN%20%20%20%20%20%20PTR%20%20%20%20%20ns1.sno.example.local.%0A2%20%20%20%20%20%20%20IN%20%20%20%20%20%20PTR%20%20%20%20%20node.sno.example.local.%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/proxy/Containerfile",
        "contents": {
          "source": "data:,FROM%20fedora%0AMAINTAINER%20%22Vinu%20K%22%20%3Cvkochuku%40redhat.com%3E%0AADD%20entrypoint.sh%20%2Fusr%2Flocal%2Fbin%2Fentrypoint.sh%0AADD%20openssl.cnf.add%20%2Fetc%2Fssl%2Fopenssl.cnf.add%0AADD%20squid.conf%20%2Fetc%2Fsquid%2Fsquid.conf%0AADD%20env%20%2Fenv%0ARUN%20yum%20install%20-y%20squid%20openssl%20ca-certificates%20which%20%26%26%20%5C%0A%20%20%20%20chmod%20%2Bx%20%2Fusr%2Flocal%2Fbin%2Fentrypoint.sh%20%26%26%20%5C%0A%20%20%20%20cat%20%2Fetc%2Fssl%2Fopenssl.cnf.add%20%3E%3E%20%2Fetc%2Fssl%2Fopenssl.cnf%0AEXPOSE%203128%0AEXPOSE%204128%0AENTRYPOINT%20%5B%22%2Fusr%2Flocal%2Fbin%2Fentrypoint.sh%22%5D%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/proxy/squid.conf",
        "contents": {
          "source": "data:,%23%0A%23%20Recommended%20minimum%20configuration%3A%0A%23%0A%0A%23%20Example%20rule%20allowing%20access%20from%20your%20local%20networks.%0A%23%20Adapt%20to%20list%20your%20(internal)%20IP%20networks%20from%20where%20browsing%0A%23%20should%20be%20allowed%0Aacl%20localnet%20src%2010.0.0.0%2F8%20%20%20%20%20%23%20RFC1918%20possible%20internal%20network%0Aacl%20localnet%20src%20172.16.0.0%2F12%20%20%23%20RFC1918%20possible%20internal%20network%0Aacl%20localnet%20src%20192.168.0.0%2F16%20%23%20RFC1918%20possible%20internal%20network%0Aacl%20localnet%20src%20fc00%3A%3A%2F7%20%20%20%20%20%20%20%23%20RFC%204193%20local%20private%20network%20range%0Aacl%20localnet%20src%20fe80%3A%3A%2F10%20%20%20%20%20%20%23%20RFC%204291%20link-local%20(directly%20plugged)%20machines%0A%0Aacl%20SSL_ports%20port%20443%0Aacl%20Safe_ports%20port%2080%20%20%20%20%20%20%20%20%20%20%23%20http%0Aacl%20Safe_ports%20port%2021%20%20%20%20%20%20%20%20%20%20%23%20ftp%0Aacl%20Safe_ports%20port%20443%20%20%20%20%20%20%20%20%20%23%20https%0Aacl%20Safe_ports%20port%2070%20%20%20%20%20%20%20%20%20%20%23%20gopher%0Aacl%20Safe_ports%20port%20210%20%20%20%20%20%20%20%20%20%23%20wais%0Aacl%20Safe_ports%20port%201025-65535%20%20%23%20unregistered%20ports%0Aacl%20Safe_ports%20port%20280%20%20%20%20%20%20%20%20%20%23%20http-mgmt%0Aacl%20Safe_ports%20port%20488%20%20%20%20%20%20%20%20%20%23%20gss-http%0Aacl%20Safe_ports%20port%20591%20%20%20%20%20%20%20%20%20%23%20filemaker%0Aacl%20Safe_ports%20port%20777%20%20%20%20%20%20%20%20%20%23%20multiling%20http%0Aacl%20CONNECT%20method%20CONNECT%0A%0A%23%0A%23%20Recommended%20minimum%20Access%20Permission%20configuration%3A%0A%23%0A%23%20Deny%20requests%20to%20certain%20unsafe%20ports%0Ahttp_access%20deny%20!Safe_ports%0A%0A%23%20Deny%20CONNECT%20to%20other%20than%20secure%20SSL%20ports%0Ahttp_access%20deny%20CONNECT%20!SSL_ports%0A%0A%23%20Only%20allow%20cachemgr%20access%20from%20localhost%0Ahttp_access%20allow%20localhost%20manager%0Ahttp_access%20deny%20manager%0A%0A%23%20We%20strongly%20recommend%20the%20following%20be%20uncommented%20to%20protect%20innocent%0A%23%20web%20applications%20running%20on%20the%20proxy%20server%20who%20think%20the%20only%0A%23%20one%20who%20can%20access%20services%20on%20%22localhost%22%20is%20a%20local%20user%0A%23http_access%20deny%20to_localhost%0A%0A%23%0A%23%20INSERT%20YOUR%20OWN%20RULE(S)%20HERE%20TO%20ALLOW%20ACCESS%20FROM%20YOUR%20CLIENTS%0A%23%0A%0A%23%20Example%20rule%20allowing%20access%20from%20your%20local%20networks.%0A%23%20Adapt%20localnet%20in%20the%20ACL%20section%20to%20list%20your%20(internal)%20IP%20networks%0A%23%20from%20where%20browsing%20should%20be%20allowed%0Ahttp_access%20allow%20localnet%0Ahttp_access%20allow%20localhost%0A%0A%23%20And%20finally%20deny%20all%20other%20access%20to%20this%20proxy%0Ahttp_access%20deny%20all%0A%0A%23%20Squid%20normally%20listens%20to%20port%203128%0Ahttp_port%203128%0A%0A%23%20Squid%20normally%20listens%20to%20port%204128%20for%20ssl%20bump%0Ahttp_port%204128%20ssl-bump%20generate-host-certificates%3Don%20dynamic_cert_mem_cache_size%3D4MB%20cert%3D%2Fetc%2Fsquid-cert%2Fprivate.pem%20key%3D%2Fetc%2Fsquid-cert%2Fprivate.pem%0Assl_bump%20server-first%20all%0Aalways_direct%20allow%20all%0A%0A%23%20Uncomment%20and%20adjust%20the%20following%20to%20add%20a%20disk%20cache%20directory.%0Acache_dir%20ufs%20%2Fvar%2Fcache%2Fsquid%20100%2016%20256%0A%0A%23%20Leave%20coredumps%20in%20the%20first%20cache%20dir%0Acoredump_dir%20%2Fvar%2Fcache%2Fsquid%0A%0A%23%0A%23%20Add%20any%20of%20your%20own%20refresh_pattern%20entries%20above%20these.%0A%23%0Arefresh_pattern%20%5Eftp%3A%20%20%20%20%20%20%20%20%20%20%201440%20%20%20%2020%25%20%20%20%20%2010080%0Arefresh_pattern%20%5Egopher%3A%20%20%20%20%20%20%20%201440%20%20%20%200%25%20%20%20%20%20%201440%0Arefresh_pattern%20-i%20(%2Fcgi-bin%2F%7C%5C%3F)%200%20%20%20%20%200%25%20%20%20%20%20%200%0Arefresh_pattern%20.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2030%20%20%20%20%20%2020%25%20%20%20%20%204320%20reload-into-ims%0A%0A%0Arange_offset_limit%20200%20MB%0Amaximum_object_size%20200%20MB%0Aquick_abort_min%20-1%0A%0Asslcrtd_program%20%2Fusr%2Flib64%2Fsquid%2Fsecurity_file_certgen%20-s%20%2Fvar%2Flib%2Fsquid%2Fssl_db%20-M%2020MB%0Asslproxy_cert_error%20allow%20all%0Assl_bump%20stare%20all%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/proxy/openssl.cnf.add",
        "contents": {
          "source": "data:,%5B%20v3_req%20%5D%0AbasicConstraints%20%3D%20CA%3AFALSE%0AkeyUsage%20%3D%20nonRepudiation%2C%20digitalSignature%2C%20keyEncipherment%0A%5B%20v3_ca%20%5D%0AkeyUsage%20%3D%20cRLSign%2C%20keyCertSign%0AsubjectKeyIdentifier%3Dhash%0AauthorityKeyIdentifier%3Dkeyid%3Aalways%2Cissuer%3Aalways%0AbasicConstraints%20%3D%20CA%3Atrue%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/proxy/entrypoint.sh",
        "contents": {
          "source": "data:,%23!%2Fbin%2Fsh%0A%0Aset%20-xe%0A%0Asource%20%2Fenv%0A%0ACHOWN%3D%24(%2Fusr%2Fbin%2Fwhich%20chown)%0ASQUID%3D%24(%2Fusr%2Fbin%2Fwhich%20squid)%0A%0Aprepare_folders()%20%7B%0A%20%20%20%20%20%20%20%20echo%20%22Preparing%20folders...%22%0A%20%20%20%20%20%20%20%20mkdir%20-p%20%2Fetc%2Fsquid-cert%2F%0A%20%20%20%20%20%20%20%20mkdir%20-p%20%2Fvar%2Fcache%2Fsquid%2F%0A%20%20%20%20%20%20%20%20mkdir%20-p%20%2Fvar%2Flog%2Fsquid%2F%0A%20%20%20%20%20%20%20%20%22%24CHOWN%22%20-R%20squid%3Asquid%20%2Fetc%2Fsquid-cert%2F%0A%20%20%20%20%20%20%20%20%22%24CHOWN%22%20-R%20squid%3Asquid%20%2Fvar%2Fcache%2Fsquid%2F%0A%20%20%20%20%20%20%20%20%22%24CHOWN%22%20-R%20squid%3Asquid%20%2Fvar%2Flog%2Fsquid%2F%0A%7D%0A%0Ainitialize_cache()%20%7B%0A%20%20%20%20%20%20%20%20echo%20%22Creating%20cache%20folder...%22%0A%20%20%20%20%20%20%20%20%22%24SQUID%22%20-z%0A%0A%20%20%20%20%20%20%20%20sleep%205%0A%7D%0A%0Acreate_cert()%20%7B%0A%20%20%20%20%20%20%20%20if%20%5B%20!%20-f%20%2Fetc%2Fsquid-cert%2Fprivate.pem%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Creating%20certificate...%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20openssl%20req%20-new%20-newkey%20rsa%3A2048%20-sha256%20-days%203650%20-nodes%20-x509%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-extensions%20v3_ca%20-keyout%20%2Fetc%2Fsquid-cert%2Fprivate.pem%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-out%20%2Fetc%2Fsquid-cert%2Fprivate.pem%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-subj%20%22%2FCN%3Dproxy.%24%7BCLUSTER_NAME%7D.%24%7BDOMAIN%7D%2FO%3DSquid%2FOU%3DSquid%2FC%3DIN%22%20-utf8%20-nameopt%20multiline%2Cutf8%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20openssl%20x509%20-in%20%2Fetc%2Fsquid-cert%2Fprivate.pem%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-outform%20DER%20-out%20%2Fetc%2Fsquid-cert%2FCA.der%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20openssl%20x509%20-inform%20DER%20-in%20%2Fetc%2Fsquid-cert%2FCA.der%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20-out%20%2Fetc%2Fsquid-cert%2FCA.pem%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Certificate%20found...%22%0A%20%20%20%20%20%20%20%20fi%0A%7D%0A%0Aclear_certs_db()%20%7B%0A%20%20%20%20%20%20%20%20echo%20%22Clearing%20generated%20certificate%20db...%22%0A%20%20%20%20%20%20%20%20rm%20-rfv%20%2Fvar%2Flib%2Fsquid%0A%20%20%20%20%20%20%20%20mkdir%20-p%20%2Fvar%2Flib%2Fsquid%0A%20%20%20%20%20%20%20%20%2Fusr%2Flib64%2Fsquid%2Fsecurity_file_certgen%20-c%20-s%20%2Fvar%2Flib%2Fsquid%2Fssl_db%20-M%2020MB%0A%20%20%20%20%20%20%20%20%22%24CHOWN%22%20-R%20squid%3Asquid%20%2Fvar%2Flib%2Fsquid%0A%7D%0A%0Arun()%20%7B%0A%20%20%20%20%20%20%20%20echo%20%22Starting%20squid...%22%0A%20%20%20%20%20%20%20%20prepare_folders%0A%20%20%20%20%20%20%20%20create_cert%0A%20%20%20%20%20%20%20%20clear_certs_db%0A%20%20%20%20%20%20%20%20initialize_cache%0A%20%20%20%20%20%20%20%20exec%20%22%24SQUID%22%20-NYCd%201%20-f%20%2Fetc%2Fsquid%2Fsquid.conf%0A%7D%0A%0Arun%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/proxy/env",
        "contents": {
          "source": "data:,CLUSTER_NAME%3Docp%0ADOMAIN%3Dexample.local%0A"
        },
        "mode": 420
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/proxy/certs/.keepdir",
        "contents": {
          "source": "data:,keepdir%0A"
        },
        "mode": 420
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.Makefile",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,SHELL%20%3D%20%2Fbin%2Fbash%0ARELEASE%20%3F%3D%20stable%0ALOGLEVEL%20%3F%3D%20info%0ASCRIPT_DIR%20%3D%20%24(shell%20cd%20--%20%22%24(%20dirname%20--%20%22%24%7BBASH_SOURCE%5B0%5D%3A-%240%7D%22%3B%20)%22%20%26%3E%20%2Fdev%2Fnull%20%26%26%20pwd%202%3E%20%2Fdev%2Fnull%3B%20)%0ACONTAINERS%20%3D%20%24(shell%20sudo%20podman%20ps%20--format%20%7B%7B.Names%7D%7D%20%7C%20sort%20%7C%20grep%20-oE%20'%5Edhcp%7Cvbmc%7Cwebserver%7Cproxy'%20%7C%20xargs)%0AVMS%20%3D%20%24(shell%20sudo%20virsh%20list%20--all%20--name%20%7C%20grep%20-oE%20'master0%7Cmaster1%7Cmaster2%7Cworker0%7Cworker1'%20%7C%20xargs)%0ATFF%20%3D%20%24(shell%20ls%20%2Ftmp%2Fopenshift-install-bootstrap-*%2Fterraform.platform.auto.tfvars.json%202%3E%2Fdev%2Fnull%20%7C%20wc%20-l)%0AVIRBR0%3D%24(shell%20sudo%20virsh%20net-info%20default%20%7C%20awk%20'%2FBridge%3A%2F%7Bprint%20%24%242%7D')%0AVIRBR0MAC%3D%24(shell%20ip%20a%20s%20%24%7BVIRBR0%7D%20%7C%20awk%20'%2Fether%20%2F%7Bprint%20%24%242%7D'%20%7C%20cut%20-f1-4%20-d'%3A')%0A%0A.PHONY%3A%20all%0A%0Aall%3A%20help%0A%0Acheck-from%3A%0Aifndef%20FROM%0A%20%20%20%20%20%20%24(error%20FROM%20is%20undefined%20%7C%20Usage%3A%20onp%20store-release%20FROM%3D4.x.y)%0Aendif%0A%0Acheck-to%3A%0Aifndef%20TO%0A%20%20%20%20%20%20%24(error%20TO%20is%20undefined%20%7C%20Usage%3A%20onp%20restore-release%20TO%3D4.x.y)%0Aendif%0A%0Acheck-containers%3A%0Aifneq%20(%24(CONTAINERS)%2Cdhcp%20proxy%20vbmc%20webserver)%0A%20%20%20%20%20%20%24(error%20The%20containerized%20services%20(dhcp%20proxy%20vbmc%20webserver)%20are%20not%20ready.%20Check%20with%20'sudo%20podman%20ps'%20and%20wait%20for%20a%20while%20to%20retry)%0Aendif%0A%0Acheck-vms%3A%0Aifneq%20(%24(VMS)%2Cmaster0%20master1%20master2%20worker0%20worker1)%0A%20%20%20%20%20%20%24(error%20The%20VMs%20are%20not%20ready.%20Please%20restart%20the%20services%20with%20'sudo%20systemctl%20restart%20master0%20master1%20master2%20worker0%20worker1'%20and%20retry)%0Aendif%0A%0Acheck-terraform-file%3A%0Aifneq%20(%24(TFF)%2C1)%0A%20%20%20%20%20%20%24(error%20The%20terraform.platform.auto.tfvars.json%20file%20is%20not%20present%20in%20%2Ftmp)%0Aendif%0A%0A.PHONY%3A%20ssh-pullsecret%0A%0Assh-pullsecret%3A%0Aifneq%20(%24(shell%20for%20FILE%20in%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fpullsecret%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fid_ed25519.pub%3B%20do%20test%20-e%20%24%24%7BFILE%7D%20%26%26%20echo%20-n%20OK%3B%20done)%2COKOK)%0A%20%20%20%20%20%20ifndef%20OCM_TOKEN%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(error%20OCM_TOKEN%20is%20undefined%20%7C%20Get%20it%20from%20https%3A%2F%2Fcloud.redhat.com%2Fopenshift%2Ftoken)%0A%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%40echo%20%22Generating%20SSH%20keys%20and%20pullsecret%20...%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%40openshift-network-playground%2Fssh-pullsecret.sh%20%24(OCM_TOKEN)%0A%20%20%20%20%20%20endif%0Aendif%0A%0A.PHONY%3A%20install-config%0A%0Ainstall-config%3A%20ssh-pullsecret%0A%20%20%20%20%20%20%40openshift-network-playground%2Finstall-config.sh%20%24(RELEASE)%0A%0A.PHONY%3A%20manifests%0A%0Amanifests%3A%20%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fclusterconfigs%2Finstall-config.yaml%0A%20%20%20%20%20%20%40echo%20%22Generating%20manifests%20...%22%0A%20%20%20%20%20%20%40%2Fusr%2Flocal%2Fbin%2Fopenshift-baremetal-install%20--log-level%3D%24%7BLOGLEVEL%7D%20--dir%3D%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fclusterconfigs%20create%20manifests%0A%0A.PHONY%3A%20ignition-configs%0A%0Aignition-configs%3A%0A%20%20%20%20%20%20%40echo%20%22Generating%20ignition-configs%20...%22%0A%20%20%20%20%20%20%40%2Fusr%2Flocal%2Fbin%2Fopenshift-baremetal-install%20--log-level%3D%24%7BLOGLEVEL%7D%20--dir%3D%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fclusterconfigs%20create%20ignition-configs%0A%0A.PHONY%3A%20cluster%0A%0Acluster%3A%20ssh-pullsecret%20check-containers%20check-vms%0A%20%20%20%20%20%20%40echo%20%22Creating%20cluster%20...%22%0A%20%20%20%20%20%20%40%2Fusr%2Flocal%2Fbin%2Fopenshift-baremetal-install%20--log-level%3D%24%7BLOGLEVEL%7D%20--dir%3D%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fclusterconfigs%20create%20cluster%0A%0A.PHONY%3A%20clean%0A%0Aclean%3A%0A%20%20%20%20%20%20%40echo%20%22Removing%20old%20bootstrap%20resources%20...%22%0A%20%20%20%20%20%20-%40%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fclean-bootstrap.sh%0A%0A.PHONY%3A%20destroy%0A%0Adestroy%3A%0A%20%20%20%20%20%20%40echo%20%22Destroying%20bootrap%20...%22%0A%20%20%20%20%20%20-%40openshift-baremetal-install%20destroy%20--log-level%3D%24%7BLOGLEVEL%7D%20--dir%3D%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclusterconfigs%20bootstrap%0A%20%20%20%20%20%20%40echo%20%22Destroying%20cluster%20...%22%0A%20%20%20%20%20%20-%40openshift-baremetal-install%20destroy%20--log-level%3D%24%7BLOGLEVEL%7D%20--dir%3D%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclusterconfigs%20cluster%0A%20%20%20%20%20%20%40echo%20%22Removing%20installation%20directory%20...%22%0A%20%20%20%20%20%20-%40rm%20-rfv%20%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fclusterconfigs%0A%20%20%20%20%20%20%40echo%20%22Powering%20off%20master%20nodes%20...%22%0A%20%20%20%20%20%20-%40for%20i%20in%20master0%20master1%20master2%3B%20do%20sudo%20virsh%20destroy%20%24%24i%3B%20done%0A%20%20%20%20%20%20%40echo%20%22!!!%20IGNORE%20THE%20ERRORS%20!!!%22%0A%0A.PHONY%3A%20deploy%0A%0Adeploy%3A%20ssh-pullsecret%20clean%20install-config%20manifests%20core-passwd-auth%20cluster%0A%0A.PHONY%3A%20core-passwd-auth%0A%0Acore-passwd-auth%3A%0A%20%20%20%20%20%20sed%20%22s%2Fversion%3A%204.x.x%2Fversion%3A%20%24(shell%20oc%20version%20--client%20-o%20json%20%7C%20jq%20-r%20.releaseClientVersion%20%7C%20cut%20-d'.'%20-f'1-2').0%2Fg%22%20%5C%0A%20%20%20%20%20%20%2Fhome%2Fonp%2Fopenshift-network-playground%2F99_openshift-machineconfig_99-master-core-passwd-auth.bu%20%3E%20%2Ftmp%2Fmaster-core-passwd-auth.bu%0A%20%20%20%20%20%20sed%20%22s%2Fversion%3A%204.x.x%2Fversion%3A%20%24(shell%20oc%20version%20--client%20-o%20json%20%7C%20jq%20-r%20.releaseClientVersion%20%7C%20cut%20-d'.'%20-f'1-2').0%2Fg%22%20%5C%0A%20%20%20%20%20%20%2Fhome%2Fonp%2Fopenshift-network-playground%2F99_openshift-machineconfig_99-worker-core-passwd-auth.bu%20%3E%20%2Ftmp%2Fworker-core-passwd-auth.bu%0A%20%20%20%20%20%20podman%20run%20-i%20--rm%20quay.io%2Fcoreos%2Fbutane%3Arelease%20--strict%20%3C%20%2Ftmp%2Fmaster-core-passwd-auth.bu%20%3E%20%5C%0A%20%20%20%20%20%20%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclusterconfigs%2Fopenshift%2F99_openshift-machineconfig_99-master-core-passwd-auth.yaml%0A%20%20%20%20%20%20podman%20run%20-i%20--rm%20quay.io%2Fcoreos%2Fbutane%3Arelease%20--strict%20%3C%20%2Ftmp%2Fworker-core-passwd-auth.bu%20%3E%20%5C%0A%20%20%20%20%20%20%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclusterconfigs%2Fopenshift%2F99_openshift-machineconfig_99-worker-core-passwd-auth.yaml%0A%0A.PHONY%3A%20onp-files%0A%0Aonp-files%3A%0A%20%20%20%20%20%20%40echo%20%22Cloning%20onp-files%20...%22%0A%20%20%20%20%20%20-%40rm%20-rf%20%24(SCRIPT_DIR)%2Fonp-files%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%40git%20clone%20https%3A%2F%2Fgithub.com%2Fkevydotvinu%2Fonp-files%0A%0A.PHONY%3A%20ironic-client%0A%0Aironic-client%3A%20check-terraform-file%0A%20%20%20%20%20%20%40echo%20%22Creating%20clouds.yaml%20file%20...%22%0A%20%20%20%20%20%20-%40jq%20-jr%20'%22clouds%3A%22%2C%22%5Cn%22%2C%22%20%20metal3%3A%22%2C%22%5Cn%22%2C%22%20%20%20%20auth_type%3A%20http_basic%22%2C%22%5Cn%22%2C%22%20%20%20%20username%3A%20%22%2C.ironic_username%2C%22%5Cn%22%2C%22%20%20%20%20password%3A%20%22%2C.ironic_password%2C%22%5Cn%22%2C%22%20%20%20%20baremetal_endpoint_override%3A%20%22%2C.ironic_uri%2C%22%5Cn%22%2C%22%20%20%20%20baremetal_introspection_endpoint_override%3A%20%22%2C.inspector_uri%2C%22%5Cn%22'%20%2Ftmp%2Fopenshift-*%2Fterraform.platform.auto.tfvars.json%20%3E%20%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclouds.yaml%0A%20%20%20%20%20%20%40echo%20%22Starting%20ironic-client%20container%20...%22%0A%20%20%20%20%20%20-%40sudo%20podman%20run%20-ti%20--rm%20--entrypoint%20%2Fbin%2Fbash%20--net%20host%20-v%20%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclouds.yaml%3A%2Fclouds.yaml%20-e%20OS_CLOUD%3Dmetal3%20quay.io%2Fmetal3-io%2Fironic-client%3Alatest%0A%0A.PHONY%3A%20go-download%0A%0Ago-download%3A%0A%20%20%20%20%20%20%40echo%20%22Downloading%20go%20...%22%0A%20%20%20%20%20%20%40curl%20-sL%20https%3A%2F%2Fgolang.org%24%24(curl%20-sL%20https%3A%2F%2Fgolang.org%2Fdl%2F%20%7C%20grep%20-oP%20'%2Fdl%2Fgo(%5B0-9%5C.%5D%2B)%5C.linux-amd64.tar.gz'%20%7C%20head%20-1)%20%7C%20sudo%20tar%20xzf%20-%20-C%20%2Fusr%2Flocal%0A%20%20%20%20%20%20%40echo%20%22OK!%22%0A%0A%0A.PHONY%3A%20kind-download%0A%0Akind-download%3A%0A%20%20%20%20%20%20%40echo%20%22Downloading%20kind%20...%22%0A%20%20%20%20%20%20%40sudo%20curl%20-sLo%20%2Fusr%2Flocal%2Fbin%2Fkind%20%24%24(curl%20-sL%20https%3A%2F%2Fapi.github.com%2Frepos%2Fkubernetes-sigs%2Fkind%2Freleases%2Flatest%20%7C%20jq%20-r%20'.assets%20%7C%20.%5B%5D%20%7C%20select(.name%20%3D%3D%20%22kind-linux-amd64%22)%20%7C%20.browser_download_url')%0A%20%20%20%20%20%20%40sudo%20chmod%20%2Bx%20%2Fusr%2Flocal%2Fbin%2Fkind%0A%20%20%20%20%20%20%40echo%20%22OK%22%0A%20%20%20%20%20%20%40echo%20%22Downloading%20kubectl%20...%22%0A%20%20%20%20%20%20%40sudo%20curl%20-sLo%20%2Fusr%2Flocal%2Fbin%2Fkubectl%20https%3A%2F%2Fdl.k8s.io%2Frelease%2F%24%24(curl%20-sL%20https%3A%2F%2Fdl.k8s.io%2Frelease%2Fstable.txt)%2Fbin%2Flinux%2Famd64%2Fkubectl%0A%20%20%20%20%20%20%40sudo%20chmod%20%2Bx%20%2Fusr%2Flocal%2Fbin%2Fkubectl%0A%20%20%20%20%20%20%40echo%20%22OK%22%0A%0A.PHONY%3A%20kind-create-onp%0A%0Akind-create-onp%3A%0A%20%20%20%20%20%20%40echo%20%22Creating%20kind%20cluster%20...%22%0A%20%20%20%20%20%20%40sudo%20KIND_EXPERIMENTAL_PROVIDER%3Dpodman%20kind%20create%20cluster%20--name%20onp%0A%20%20%20%20%20%20%40sudo%20cp%20%2Froot%2F.kube%2Fconfig%20%24%7BHOME%7D%2F.kube%2Fonp-kind-config%0A%20%20%20%20%20%20%40sudo%20chown%20onp%3Aonp%20%24%7BHOME%7D%2F.kube%2Fonp-kind-config%0A%20%20%20%20%20%20%40echo%20%22OK%22%0A%20%20%20%20%20%20%40echo%20%22Try%2C%20k%20get%20nodes.%22%0A%0A.PHONY%3A%20kind-delete-onp%0A%0Akind-delete-onp%3A%0A%20%20%20%20%20%20%40echo%20%22Deleting%20kind%20cluster%20...%22%0A%20%20%20%20%20%20%40sudo%20KIND_EXPERIMENTAL_PROVIDER%3Dpodman%20kind%20delete%20cluster%20--name%20onp%0A%20%20%20%20%20%20%40rm%20-rf%20%24%7BHOME%7D%2F.kube%2Fonp-kind-config%0A%0A.PHONY%3A%20kind-create-ovn%0A%0Akind-create-ovn%3A%20go-download%0A%20%20%20%20%20%20%40echo%20%22Creating%20OVN%20kind%20cluster%20...%22%0A%20%20%20%20%20%20go%20env%20-w%20GO111MODULE%3Dauto%20%26%26%20%5C%0A%20%20%20%20%20%20(sudo%20rm%20-rf%20%24%7BHOME%7D%2Fovn-kubernetes%20%7C%7C%20true)%20%26%26%20%5C%0A%20%20%20%20%20%20git%20clone%20https%3A%2F%2Fgithub.com%2Fovn-org%2Fovn-kubernetes%20%24%7BHOME%7D%2Fovn-kubernetes%20%26%26%20%5C%0A%20%20%20%20%20%20sudo%20pip3%20install%20j2cli%20%26%26%20%5C%0A%20%20%20%20%20%20pushd%20%24%7BHOME%7D%2Fovn-kubernetes%2Fgo-controller%20%26%26%20%5C%0A%20%20%20%20%20%20make%20%26%26%20%5C%0A%20%20%20%20%20%20popd%20%26%26%20%5C%0A%20%20%20%20%20%20pushd%20%24%7BHOME%7D%2Fovn-kubernetes%2Fdist%2Fimages%20%26%26%20%5C%0A%20%20%20%20%20%20OCI_BIN%3Dpodman%20make%20fedora%20%26%26%20%5C%0A%20%20%20%20%20%20popd%20%26%26%20%5C%0A%20%20%20%20%20%20pushd%20%24%7BHOME%7D%2Fovn-kubernetes%2Fcontrib%20%26%26%20%5C%0A%20%20%20%20%20%20sudo%20PATH%3D%24%7BPATH%7D%3A%2Fusr%2Flocal%2Fgo%2Fbin%20.%2Fkind.sh%20-ep%20podman%20%26%26%20%5C%0A%20%20%20%20%20%20mkdir%20-p%20%24%7BHOME%7D%2F.kube%20%26%26%20%5C%0A%20%20%20%20%20%20sudo%20cp%20%2Froot%2Fovn.conf%20%24%7BHOME%7D%2F.kube%2Fovn-kind-config%20%26%26%20%5C%0A%20%20%20%20%20%20sudo%20chown%20%24%24(id%20-u)%3A%24%24(id%20-g)%20%24%7BHOME%7D%2F.kube%2Fovn-kind-config%20%26%26%20%5C%0A%20%20%20%20%20%20popd%0A%0A.PHONY%3A%20kind-delete-ovn%0A%0Akind-delete-ovn%3A%0A%20%20%20%20%20%20%40echo%20%22Deleting%20OVN%20kind%20cluster%20...%22%0A%20%20%20%20%20%20pushd%20%24%7BHOME%7D%2Fovn-kubernetes%2Fcontrib%20%26%26%20%5C%0A%20%20%20%20%20%20sudo%20.%2Fkind.sh%20-ep%20podman%20--delete%20%26%26%20%5C%0A%20%20%20%20%20%20rm%20-rf%20%24%7BHOME%7D%2Fovn-kubernetes%20%26%26%20%5C%0A%20%20%20%20%20%20sudo%20rm%20-rf%20%24%7BHOME%7D%2F.kube%2Fovn-kind-config%20%26%26%20%5C%0A%20%20%20%20%20%20popd%0A%0A.PHONY%3A%20sno%0A%0Asno%3A%20ssh-pullsecret%0A%20%20%20%20%20%20%40echo%20%22Creating%20SNO%20cluster%20...%22%0A%20%20%20%20%20%20%40openshift-network-playground%2Fsno.sh%20%24%7BRELEASE%7D%0A%20%20%20%20%20%20%40%2Fusr%2Flocal%2Fbin%2Fopenshift-install%20--log-level%3D%24%7BLOGLEVEL%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--dir%3D%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fsno%20create%20single-node-ignition-config%0A%20%20%20%20%20%20%40sudo%20podman%20run%20--privileged%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20--quiet%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20--pull%20always%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20--rm%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-v%20%2Fdev%3A%2Fdev%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-v%20%2Frun%2Fudev%3A%2Frun%2Fudev%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-v%20%2F%3A%2Fdata%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-w%20%2Fdata%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20quay.io%2Fcoreos%2Fcoreos-installer%3Arelease%20iso%20ignition%20embed%20-fi%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%2Fhome%2Fonp%2Fopenshift-network-playground%2Fsno%2Fbootstrap-in-place-for-live-iso.ign%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20opt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Frhcos-live.iso%0A%20%20%20%20%20%20%40sudo%20podman%20run%20--privileged%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20--quiet%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20--pull%20always%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20--rm%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-v%20%2Fdev%3A%2Fdev%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-v%20%2Frun%2Fudev%3A%2Frun%2Fudev%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-v%20%2F%3A%2Fdata%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20-w%20%2Fdata%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20quay.io%2Fcoreos%2Fcoreos-installer%3Arelease%20iso%20network%20embed%20-fk%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%2Fhome%2Fonp%2Fopenshift-network-playground%2Fenp1s0.nmconnection%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20opt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Frhcos-live.iso%0A%20%20%20%20%20%20%40sudo%20virt-install%20--name%20sno%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--quiet%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--os-variant%20fedora-coreos-stable%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--vcpu%204%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--memory%2016384%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--boot%20menu%3Don%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--pxe%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--disk%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Fsno.img%2Cbus%3Dscsi%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--cdrom%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Frhcos-live.iso%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--network%20bridge%3Dsno0%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--noautoconsole%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--graphics%20spice%2Clisten%3D0.0.0.0%0A%20%20%20%20%20%20%40%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fsno-restart.sh%0A%20%20%20%20%20%20%40%2Fusr%2Flocal%2Fbin%2Fopenshift-install%20--log-level%3D%24%7BLOGLEVEL%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--dir%3D%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Fsno%20wait-for%20install-complete%0A%0A.PHONY%3A%20network-tools%0A%0Anetwork-tools%3A%0A%20%20%20%20%20%20%40echo%20%22Cloning%20network-tools%20...%22%0A%20%20%20%20%20%20-%40rm%20-rf%20%24(SCRIPT_DIR)%2F.local%2Fnetwork-tools%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%40git%20clone%20https%3A%2F%2Fgithub.com%2Fopenshift%2Fnetwork-tools%20%24(SCRIPT_DIR)%2F.local%2Fnetwork-tools%0A%0A.PHONY%3A%20fcos%0A%0Afcos%3A%0A%20%20%20%20%20%20%40echo%20%22Creating%20FCOS%20VM%20...%22%0A%20%20%20%20%20%20%40%24(SCRIPT_DIR)%2Fopenshift-network-playground%2Ffcos.sh%0A%0A.PHONY%3A%20rhcos-livecd%0A%0ANETWORK%3F%3Dnetwork%3Ddefault%0A%0Arhcos-livecd%3A%0A%20%20%20%20%20%20%20%20%40echo%20%22Creating%20RHCOS%20live%20CD%20...%22%0A%20%20%20%20%20%20%20%20%40sudo%20mkdir%20-p%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Frhcos-livecd%0A%20%20%20%20%20%20%20%20%40sudo%20curl%20-%23%20-o%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Frhcos-livecd%2Frhcos-livecd.iso%20%5C%0A%20%20%20%20%20%20%20%20https%3A%2F%2Fmirror.openshift.com%2Fpub%2Fopenshift-v4%2Fdependencies%2Frhcos%2Flatest%2Frhcos-live.x86_64.iso%0A%20%20%20%20%20%20%20%20-%40sudo%20virsh%20destroy%20rhcos-livecd%20%3E%2Fdev%2Fnull%202%3E%261%0A%20%20%20%20%20%20%20%20-%40sudo%20virsh%20undefine%20rhcos-livecd%20%3E%2Fdev%2Fnull%202%3E%261%0A%20%20%20%20%20%20%20%20%40echo%20%22Press%20TAB%20and%20type%20console%3DttyS0%20in%20the%20next%20screen%20...%22%0A%20%20%20%20%20%20%20%20%40sleep%205s%0A%20%20%20%20%20%20%20%20%40sudo%20virt-install%20--name%20rhcos-livecd%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--network%20%24%7BNETWORK%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--pxe%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--boot%20menu%3Don%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--memory%202096%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--vcpu%202%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--disk%20none%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--os-variant%20fedora-coreos-stable%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--cdrom%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Frhcos-livecd%2Frhcos-livecd.iso%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--noautoconsole%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--graphics%20spice%2Clisten%3D0.0.0.0%0A%20%20%20%20%20%20%20%20%40sudo%20virsh%20console%20rhcos-livecd%0A%0A.PHONY%3A%20disconnect-cluster%0A%0Adisconnect-cluster%3A%0A%20%20%20%20%20%20%40echo%20%22Disabling%20internet%20for%20OpenShift%20cluster%20...%22%0A%20%20%20%20%20%20%40sudo%20iptables%20-C%20FORWARD%20-i%20baremetal%20-o%20eno1%20-j%20DROP%20%7C%7C%20sudo%20iptables%20-A%20FORWARD%20-i%20baremetal%20-o%20eno1%20-j%20DROP%0A%20%20%20%20%20%20%40echo%20%22OK!%22%0A%0A.PHONY%3A%20connect-cluster%0A%0Aconnect-cluster%3A%0A%20%20%20%20%20%20%40echo%20%22Enabling%20internet%20for%20OpenShift%20cluster%20...%22%0A%20%20%20%20%20%20%40sudo%20iptables%20-D%20FORWARD%20-i%20baremetal%20-o%20eno1%20-j%20DROP%20%3E%20%2Fdev%2Fnull%202%3E%261%20%7C%7C%20echo%20%22Rule%20exists!%22%0A%20%20%20%20%20%20%40echo%20%22OK!%22%0A%0A.PHONY%3A%20services%0A%0ABAREMETAL-DHCP%3D%24%24(sudo%20systemctl%20is-active%20dhcp)%0AVBMC%3D%24%24(sudo%20systemctl%20is-active%20vbmc)%0AWEBSERVER%3D%24%24(sudo%20systemctl%20is-active%20webserver)%0AONP1-DHCP%3D%24%24(sudo%20systemctl%20is-active%20onp1-dhcp)%0AONP2-DHCP%3D%24%24(sudo%20systemctl%20is-active%20onp2-dhcp)%0ACOCKPIT%3D%24%24(sudo%20systemctl%20is-active%20cockpit)%0APXE%3D%24%24(sudo%20systemctl%20is-active%20pxe)%0APROXY%3D%24%24(sudo%20systemctl%20is-active%20proxy)%0ANAT64%3D%24%24(sudo%20systemctl%20is-active%20nat64)%0ADNS64%3D%24%24(sudo%20systemctl%20is-active%20dns64)%0A%0Aservices%3A%0A%20%20%20%20%20%20%40echo%20-e%20%22SERVICE%5Ct%5CtIS-ACTIVE%22%0A%20%20%20%20%20%20%40echo%20-e%20%22baremetal-dhcp%5Ct%24%7BBAREMETAL-DHCP%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22vbmc%5Ct%5Ct%24%7BVBMC%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22webserver%5Ct%24%7BWEBSERVER%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22onp1-dhcp%5Ct%24%7BONP1-DHCP%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22onp2-dhcp%5Ct%24%7BONP2-DHCP%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22cockpit%5Ct%5Ct%24%7BCOCKPIT%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22pxe%5Ct%5Ct%24%7BPXE%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22proxy%5Ct%5Ct%24%7BPROXY%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22nat64%5Ct%5Ct%24%7BNAT64%7D%22%0A%20%20%20%20%20%20%40echo%20-e%20%22dns64%5Ct%5Ct%24%7BDNS64%7D%22%0A%0A.PHONY%3A%20bootstrap-ip%0A%0Abootstrap-ip%3A%0A%20%20%20%20%20%20%40if%20sudo%20virsh%20-q%20list%20%7C%20grep%20-q%20bootstrap%3B%20then%20journalctl%20-u%20dhcp%20%7C%20grep%20PACK%20%7C%20grep%20%24%24(sudo%20virsh%20-q%20domiflist%20%24%24(sudo%20virsh%20-q%20list%20%7C%20grep%20bootstrap%20%7C%20awk%20'%7Bprint%20%24%242%7D')%20%7C%20grep%20baremetal%20%7C%20awk%20'%7Bprint%20%24%245%7D')%20%7C%20awk%20'%7Bprint%20%24%249%7D'%3B%20fi%0A%0A.PHONY%3A%20list-releases%0A%0Alist-releases%3A%0A%20%20%20%20%20%20%20%20%40echo%20-e%20%22RELEASES%22%0A%20%20%20%20%20%20%20%20%40ls%20%2Fopt%2Fopenshift-network-playground%2F%20%7C%20grep%204%5B.%5D%0A%0A.PHONY%3A%20store-release%0A%0Astore-release%3A%20check-from%0A%20%20%20%20%20%20%20%20%40echo%20-e%20%22Storing%20%24%7BFROM%7D%20release%20...%22%0A%20%20%20%20%20%20%20%20%40%24%7BHOME%7D%2Fopenshift-network-playground%2Fstore-release.sh%20%24%7BFROM%7D%0A%0A.PHONY%3A%20restore-release%0A%0Arestore-release%3A%20check-to%0A%20%20%20%20%20%20%20%20%40echo%20-e%20%22Restoring%20%24%7BTO%7D%20release%20...%22%0A%20%20%20%20%20%20%20%20%40%24%7BHOME%7D%2Fopenshift-network-playground%2Frestore-release.sh%20%24%7BTO%7D%0A%0A.PHONY%3A%20help%0A%0Ahelp%3A%0A%20%20%20%20%20%20%40echo%20%22OpenShift%20Network%20Playground%20CLI%22%0A%20%20%20%20%20%20%40echo%20%22%22%0A%20%20%20%20%20%20%40echo%20%22It%20includes%20the%20administrative%20commands%20for%20managing%20the%20ONP.%22%0A%20%20%20%20%20%20%40echo%20%22%22%0A%20%20%20%20%20%20%40echo%20%22Usage%3A%20onp%20%5BSUBCOMMAND%5D%20%5BVARIABLE_NAME%5D%3D%3Cvariable%3E%22%0A%20%20%20%20%20%20%40echo%20%22%22%0A%20%20%20%20%20%20%40echo%20%22Subcommands%3A%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20ssh-pullsecret%20OCM_TOKEN%3D%3COCM_TOKEN%3E%5CtGenerate%20SSH%20keys%20and%20download%20pullsecret%20file%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20install-config%5Ct%5Ct%5CtGenerate%20install-config.yaml%20file%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20cluster%5Ct%5Ct%5Ct%5CtCreate%20an%20OpenShift%20cluster%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20clean%5Ct%5Ct%5Ct%5Ct%5CtClean%20old%20cluster%20resources%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20go-download%5Ct%5Ct%5Ct%5CtDownload%20and%20install%20Golang%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20kind-download%5Ct%5Ct%5Ct%5CtDownload%20and%20install%20Kind%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20kind-create-onp%5Ct%5Ct%5CtCreate%20a%20Kind%20cluster%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20kind-delete-onp%5Ct%5Ct%5CtDelete%20a%20Kind%20cluster%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20kind-create-ovn%5Ct%5Ct%5CtCreate%20an%20OVN%20Kind%20cluster%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20kind-delete-ovn%5Ct%5Ct%5CtCreate%20an%20OVN%20Kind%20cluster%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20sno%5Ct%5Ct%5Ct%5Ct%5CtCreate%20an%20IPv6%20single-stack%20SNO%20cluster%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20onp-files%5Ct%5Ct%5Ct%5CtClone%20the%20ONP%20sample%20manifests%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20rhcos-livecd%20NETWORK%3Dnewtork%3Ddefault%5CtCreate%20a%20RHCOS%20VM%20with%20custom%20network%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20disconnect-cluster%5Ct%5Ct%5CtDisconnect%20cluster%20from%20internet%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20connect-cluster%5Ct%5Ct%5CtConnect%20cluster%20to%20internet%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20services%5Ct%5Ct%5Ct%5CtList%20services%20status%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20bootstrap-ip%5Ct%5Ct%5Ct%5CtShow%20bootstrap%20IP%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20store-release%20FROM%3D4.x.y%5Ct%5CtStore%20OpenShift%204.x.y%20release%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20restore-release%20TO%3D4.x.y%5Ct%5CtRestore%20OpenShift%204.x.y%20release%22%0A%20%20%20%20%20%20%40echo%20%22%22%0A%20%20%20%20%20%20%40echo%20%22Example%3A%22%0A%20%20%20%20%20%20%40echo%20%22%20%20onp%20cluster%20LOGLEVEL%3Ddebug%22%0A%20%20%20%20%20%20%40echo%20%22%22%0A%20%20%20%20%20%20%40echo%20%22Variables%3A%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20OCM_TOKEN%5Cttoken%20from%20https%3A%2F%2Fcloud.redhat.com%2Fopenshift%2Ftoken%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20RELEASE%5Ctstable-4.10%2C%20latest-4.9%2C%204.9.0%2C%20etc%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20LOGLEVEL%5Ctdebug%2C%20info%2C%20warn%2C%20error%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20NETWORK%5Ctnetwork%3Ddefault%2C%20bridge%3Donp1-dhcp%2C%20bridge%3Donp2-dhcp%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20TO%5Ct%5Ct4.10.10%2C%204.11.11%2C%204.12.12%2C%20etc%22%0A%20%20%20%20%20%20%40echo%20-e%20%22%20%20FROM%5Ct%5Ct4.10.10%2C%204.11.11%2C%204.12.12%2C%20etc%22%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/clean-bootstrap.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%23%0A%23%20Remove%20old%20bootstrap%20resources%20if%20any%20are%20left%20over%20from%20a%20previous%20deployment%20attempt%0A%0Aset%20-o%20pipefail%0A%0ABOOTSTRAP_RESOURCES%3D%24(sudo%20virsh%20pool-list%20%7C%20grep%20bootstrap%20%7C%20awk%20'%7Bprint%20%241%7D'%20%7C%20xargs)%0AMASTER_RESOURCES%3D%24(sudo%20virsh%20list%20--all%20%7C%20grep%20master%20%7C%20awk%20'%7Bprint%20%242%7D'%20%7C%20xargs)%0A%0Aif%20%5B%20-z%20%24%7BBOOTSTRAP_RESOURCES%7D%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20echo%20%22No%20bootstrap%20resources%20...%22%0Aelse%0A%20%20%20%20%20%20%20%20for%20RESOURCE%20in%20%24%7BBOOTSTRAP_RESOURCES%7D%3B%20do%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20destroy%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20undefine%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20pool-start%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20vol-delete%20%24%7BRESOURCE%7D%20--pool%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20vol-delete%20%24%7BRESOURCE%7D-base%20--pool%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20vol-delete%20%24%7BRESOURCE%7D.ign%20--pool%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20pool-destroy%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20pool-delete%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20pool-undefine%20%24%7BRESOURCE%7D%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exit%200%0A%20%20%20%20%20%20%20%20done%0Afi%0A%0Aecho%20%22Removing%20installation%20directory%20...%22%0Arm%20-rf%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%0A%0Aecho%20%22Powering%20off%20master%20nodes%20...%22%0Aif%20%5B%5B%20-z%20%24%7BMASTER_RESOURCES%7D%20%5D%5D%3B%20then%0A%20%20%20%20%20%20%20%20echo%20%22No%20master%20resources%20...%22%0Aelse%0A%20%20%20%20%20%20%20%20for%20i%20in%20master0%20master1%20master2%20worker0%20worker1%3B%20do%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20destroy%20%24i%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exit%200%0A%20%20%20%20%20%20%20%20done%0Afi%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/ssh-pullsecret.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%23%20Download%20pull%20secret%20using%20OpenShift%20Cluster%20Manager%20API%20Token%0A%0Aset%20-euo%20pipefail%0A%0Afunction%20USAGE%20%7B%0A%20%20%20%20%20%20%20%20echo%20%22Usage%3A%20%240%20'%3COCM%20API%20Token%3E'%22%0A%20%20%20%20%20%20%20%20echo%20%22You%20need%20to%20authenticate%20using%20a%20Bearer%20token%2C%20which%20you%20can%20get%20from%20the%20link%3A%20https%3A%2F%2Fcloud.redhat.com%2Fopenshift%2Ftoken%22%0A%20%20%20%20%20%20%20%20exit%201%0A%7D%0A%0Afunction%20DOWNLOAD_PULLSECRET%20%7B%0A%20%20%20%20%20%20%20%20export%20BEARER%3D%24(curl%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--silent%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--data-urlencode%20%22grant_type%3Drefresh_token%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--data-urlencode%20%22client_id%3Dcloud-services%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--data-urlencode%20%22refresh_token%3D%24%7BOCM_API_TOKEN%7D%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20https%3A%2F%2Fsso.redhat.com%2Fauth%2Frealms%2Fredhat-external%2Fprotocol%2Fopenid-connect%2Ftoken%20%7C%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20jq%20-r%20.access_token)%0A%20%20%20%20%20%20%20%20%5B%20-f%20%24%7BSCRIPT_DIR%7D%2Fpullsecret%20%5D%20%7C%7C%20curl%20-s%20-X%20POST%20https%3A%2F%2Fapi.openshift.com%2Fapi%2Faccounts_mgmt%2Fv1%2Faccess_token%20--header%20%22Content-Type%3Aapplication%2Fjson%22%20--header%20%22Authorization%3A%20Bearer%20%24BEARER%22%20%3E%20%24%7BSCRIPT_DIR%7D%2Fpullsecret%0A%7D%0A%0Afunction%20SSH_KEY%20%7B%0A%20%20%20%20%20%20%20%20%23%20rm%20-fv%20%24%7BSCRIPT_DIR%7D%2Fid_ed25519%20%24%7BSCRIPT_DIR%7D%2Fid_ed25519.pub%0A%20%20%20%20%20%20%20%20%5B%20-f%20%24%7BSCRIPT_DIR%7D%2Fid_ed25519%20%5D%20%7C%7C%20ssh-keygen%20-q%20-t%20ed25519%20-N%20''%20-f%20%24%7BSCRIPT_DIR%7D%2Fid_ed25519%0A%7D%0A%0ASCRIPT_DIR%3D%22%24(%20cd%20--%20%22%24(%20dirname%20--%20%22%24%7BBASH_SOURCE%5B0%5D%3A-%240%7D%22%3B%20)%22%20%26%3E%20%2Fdev%2Fnull%20%26%26%20pwd%202%3E%20%2Fdev%2Fnull%3B%20)%22%0AARG_COUNT%3D%24%7B%23%7D%0AOCM_API_TOKEN%3D%24%7B1%7D%0AARG_SIZE%3D%24%7B%23OCM_API_TOKEN%7D%0A%0Aif%20%5B%20%24%7BARG_COUNT%7D%20-eq%201%20%5D%20%26%26%20%5B%20%24%7BARG_SIZE%7D%20-gt%2050%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20(%20SSH_KEY%20%26%26%20echo%20%22%E2%9C%94%20SSH%20key%20generated!%22%20)%20%7C%7C%20echo%20%22%E2%9C%97%20Error%3A%20SSH%20key%20generation%20failed!%22%0A%20%20%20%20%20%20%20%20(%20DOWNLOAD_PULLSECRET%201%3E%2Fdev%2Fnull%20%26%26%20echo%20%22%E2%9C%94%20Pull%20secret%20downloaded!%22%20)%20%7C%7C%20echo%20%22%E2%9C%97%20Error%3A%20Pull%20secret%20download%20failed!%22%0Aelse%0A%20%20%20%20%20%20%20%20USAGE%0Afi%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/install-config.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,set%20-euo%20pipefail%0A%0ASCRIPT_DIR%3D%22%24(%20cd%20--%20%22%24(%20dirname%20--%20%22%24%7BBASH_SOURCE%5B0%5D%3A-%240%7D%22%3B%20)%22%20%26%3E%20%2Fdev%2Fnull%20%26%26%20pwd%202%3E%20%2Fdev%2Fnull%3B%20)%22%0Aexport%20VERSION%3D%24%7B1%7D%0Aexport%20RELEASE_IMAGE%3D%24(curl%20-s%20https%3A%2F%2Fmirror.openshift.com%2Fpub%2Fopenshift-v4%2Fclients%2Focp%2F%24VERSION%2Frelease.txt%20%7C%20grep%20'Pull%20From%3A%20quay.io'%20%7C%20awk%20-F%20'%20'%20'%7Bprint%20%243%7D')%0Aexport%20cmd%3Dopenshift-baremetal-install%0Aexport%20pullsecret_file%3D%24%7BSCRIPT_DIR%7D%2Fpullsecret%0Aexport%20extract_dir%3D%24%7BSCRIPT_DIR%7D%0Aecho%20%22Downloading%20oc%20binary%20...%22%0Acurl%20-s%20https%3A%2F%2Fmirror.openshift.com%2Fpub%2Fopenshift-v4%2Fclients%2Focp%2F%24VERSION%2Fopenshift-client-linux.tar.gz%20%7C%20tar%20zxf%20-%20-C%20%24%7BSCRIPT_DIR%7D%20oc%0Asudo%20mv%20%24%7BSCRIPT_DIR%7D%2Foc%20%2Fusr%2Flocal%2Fbin%0Aecho%20%22%E2%9C%94%20Downloaded!%22%0Aecho%20%22Downloading%20openshift-install%20binary%20...%22%0A%2Fusr%2Flocal%2Fbin%2Foc%20adm%20release%20extract%20--registry-config%20%22%24%7Bpullsecret_file%7D%22%20--command%3D%24cmd%20--to%20%22%24%7Bextract_dir%7D%22%20%24%7BRELEASE_IMAGE%7D%0Asudo%20mv%20%24%7BSCRIPT_DIR%7D%2Fopenshift-baremetal-install%20%2Fusr%2Flocal%2Fbin%0Aecho%20%22%E2%9C%94%20Downloaded!%22%0Aexport%20RHCOS_QEMU_URI%3D%24(%2Fusr%2Flocal%2Fbin%2Fopenshift-baremetal-install%20coreos%20print-stream-json%20%7C%20jq%20-r%20--arg%20ARCH%20%22%24(arch)%22%20'.architectures%5B%24ARCH%5D.artifacts.qemu.formats%5B%22qcow2.gz%22%5D.disk.location')%0Aexport%20RHCOS_QEMU_NAME%3D%24%7BRHCOS_QEMU_URI%23%23*%2F%7D%0Aexport%20RHCOS_QEMU_UNCOMPRESSED_SHA256%3D%24(%2Fusr%2Flocal%2Fbin%2Fopenshift-baremetal-install%20coreos%20print-stream-json%20%7C%20jq%20-r%20--arg%20ARCH%20%22%24(arch)%22%20'.architectures%5B%24ARCH%5D.artifacts.qemu.formats%5B%22qcow2.gz%22%5D.disk%5B%22uncompressed-sha256%22%5D')%0Aecho%20%22Downloading%20bootstrap%20os%20image%20...%22%0A%5B%20-f%20%22%2Fhome%2Fonp%2Fopenshift-network-playground%2Frhcos_image_cache%2F%24%7BRHCOS_QEMU_NAME%7D%22%20%5D%20%7C%7C%20curl%20-sL%20%24%7BRHCOS_QEMU_URI%7D%20-o%20%2Fhome%2Fonp%2Fopenshift-network-playground%2Frhcos_image_cache%2F%24%7BRHCOS_QEMU_NAME%7D%0Aecho%20%22%E2%9C%94%20Downloaded!%22%0Aexport%20BAREMETAL_IP%3D%24(ip%20addr%20show%20dev%20baremetal%20%7C%20awk%20'%2Finet%20%2F%7Bprint%20%242%7D'%20%7C%20cut%20-d%22%2F%22%20-f1)%0Aexport%20BOOTSTRAP_OS_IMAGE%3D%22http%3A%2F%2F%24%7BBAREMETAL_IP%7D%3A8080%2F%24%7BRHCOS_QEMU_NAME%7D%3Fsha256%3D%24%7BRHCOS_QEMU_UNCOMPRESSED_SHA256%7D%22%0Aecho%20%22Generating%20install-config.yaml%20file%20...%22%0Acat%20%3C%3C%20EOF%20%3E%20%24%7BSCRIPT_DIR%7D%2Finstall-config.yaml%0AapiVersion%3A%20v1%0AbaseDomain%3A%20example.local%0Ametadata%3A%0A%20%20name%3A%20ocp%0Anetworking%3A%0A%20%20machineNetwork%3A%0A%20%20-%20cidr%3A%20192.168.123.0%2F24%0A%20%20networkType%3A%20OVNKubernetes%0Acompute%3A%0A-%20name%3A%20worker%0A%20%20replicas%3A%200%0AcontrolPlane%3A%0A%20%20name%3A%20master%0A%20%20replicas%3A%203%0A%20%20platform%3A%0A%20%20%20%20baremetal%3A%20%7B%7D%0Aplatform%3A%0A%20%20baremetal%3A%0A%20%20%20%20libvirtURI%3A%20qemu%3A%2F%2F%2Fsystem%0A%20%20%20%20bootstrapOSImage%3A%20%24%7BBOOTSTRAP_OS_IMAGE%7D%0A%20%20%20%20apiVIP%3A%20192.168.123.88%0A%20%20%20%20ingressVIP%3A%20192.168.123.89%0A%20%20%20%20provisioningNetworkCIDR%3A%20172.22.0.0%2F24%0A%20%20%20%20hosts%3A%0A%20%20%20%20%20%20-%20name%3A%20master0%0A%20%20%20%20%20%20%20%20role%3A%20master%0A%20%20%20%20%20%20%20%20bmc%3A%0A%20%20%20%20%20%20%20%20%20%20address%3A%20ipmi%3A%2F%2F192.168.123.1%3A6230%0A%20%20%20%20%20%20%20%20%20%20username%3A%20admin%0A%20%20%20%20%20%20%20%20%20%20password%3A%20password%0A%20%20%20%20%20%20%20%20bootMACAddress%3A%2052%3A54%3A00%3A11%3A22%3Ab1%0A%20%20%20%20%20%20%20%20hardwareProfile%3A%20libvirt%0A%20%20%20%20%20%20%20%20rootDeviceHints%3A%0A%20%20%20%20%20%20%20%20%20deviceName%3A%20%22%2Fdev%2Fvda%22%0A%20%20%20%20%20%20-%20name%3A%20master1%0A%20%20%20%20%20%20%20%20role%3A%20master%0A%20%20%20%20%20%20%20%20bmc%3A%0A%20%20%20%20%20%20%20%20%20%20address%3A%20ipmi%3A%2F%2F192.168.123.1%3A6231%0A%20%20%20%20%20%20%20%20%20%20username%3A%20admin%0A%20%20%20%20%20%20%20%20%20%20password%3A%20password%0A%20%20%20%20%20%20%20%20bootMACAddress%3A%2052%3A54%3A00%3A11%3A22%3Ab2%0A%20%20%20%20%20%20%20%20hardwareProfile%3A%20libvirt%0A%20%20%20%20%20%20%20%20rootDeviceHints%3A%0A%20%20%20%20%20%20%20%20%20deviceName%3A%20%22%2Fdev%2Fvda%22%0A%20%20%20%20%20%20-%20name%3A%20master2%0A%20%20%20%20%20%20%20%20role%3A%20master%0A%20%20%20%20%20%20%20%20bmc%3A%0A%20%20%20%20%20%20%20%20%20%20address%3A%20ipmi%3A%2F%2F192.168.123.1%3A6232%0A%20%20%20%20%20%20%20%20%20%20username%3A%20admin%0A%20%20%20%20%20%20%20%20%20%20password%3A%20password%0A%20%20%20%20%20%20%20%20bootMACAddress%3A%2052%3A54%3A00%3A11%3A22%3Ab3%0A%20%20%20%20%20%20%20%20hardwareProfile%3A%20libvirt%0A%20%20%20%20%20%20%20%20rootDeviceHints%3A%0A%20%20%20%20%20%20%20%20%20deviceName%3A%20%22%2Fdev%2Fvda%22%0ApullSecret%3A%20'%24(cat%20%24%7BSCRIPT_DIR%7D%2Fpullsecret)'%0AsshKey%3A%20'%24(cat%20%24%7BSCRIPT_DIR%7D%2Fid_ed25519.pub)'%0Aproxy%3A%0A%20%20httpProxy%3A%20http%3A%2F%2Fproxy.ocp.example.local%3A3128%0A%20%20httpsProxy%3A%20http%3A%2F%2Fproxy.ocp.example.local%3A4128%0A%20%20noProxy%3A%20example.local%2C192.168.122.0%2F24%2C192.168.123.0%2F24%2C192.168.124.0%2F24%2C192.168.125.0%2F24%2C192.168.126.0%2F24%2C172.22.0.0%2F24%0AadditionalTrustBundle%3A%20%7C%0A%24(cat%20%2Fopt%2Fopenshift-network-playground%2Fproxy%2Fcerts%2FCA.pem%20%7C%20sed%20's%2F%5E%2F%20%20%20%20%2F')%0AEOF%0Aecho%20%22%E2%9C%94%20Generated!%22%0Amkdir%20-p%20%24%7BSCRIPT_DIR%7D%2Fclusterconfigs%0Aecho%20%22Copying%20install-config.yaml%20file%20to%20clusterconfigs%20directory%20...%22%0Acp%20%24%7BSCRIPT_DIR%7D%2Finstall-config.yaml%20%24%7BSCRIPT_DIR%7D%2Fclusterconfigs%2F%0Aecho%20%22%E2%9C%94%20Copied!%22%0A"
        },
        "mode": 493
      },
      {
        "overwrite": true,
        "path": "/opt/openshift-network-playground/host/broadcast.sh",
        "contents": {
          "source": "data:,%23!%2Fbin%2Fsh%0Awhile%20true%3B%20do%20if%20%5B%5B%20%24(podman%20ps%20--format%20json%20%7C%20jq%20-r%20'.%5B%5D%20%7C%20.Names%20%7C%20.%5B%5D'%20%7C%20wc%20-l)%20%3D%3D%20%223%22%20%5D%5D%3B%20then%20echo%20-e%20%22The%20containerized%20services%20(%24(podman%20ps%20--format%20json%20%7C%20jq%20-r%20'.%5B%5D%20%7C%20.Names%20%7C%20.%5B%5D'%20%7C%20xargs))%20are%20ready.%5CnYou%20can%20start%20the%20OpenShift%20baremetal%20IPI%20installation%20now.%22%20%7C%20wall%20-n%3B%20break%3B%20fi%3B%20done%0A"
        },
        "mode": 493
      },
      {
        "path": "/home/onp/.bashrc",
        "append": [
          {
            "source": "data:,alias%20onp%3D'make%20--no-print-directory%20-C%20%24%7BHOME%7D%20-f%20%2Fhome%2Fonp%2F.Makefile'%0Aalias%20konp%3D'kubectl%20--kubeconfig%20%24%7BHOME%7D%2F.kube%2Fonp-kind-config'%0Aalias%20kovn%3D'kubectl%20--kubeconfig%20%24%7BHOME%7D%2F.kube%2Fovn-kind-config'%0Aalias%20kind%3D'sudo%20KIND_EXPERIMENTAL_PROVIDER%3Dpodman%20kind'%0Aalias%20sno%3D'oc%20--kubeconfig%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fsno%2Fauth%2Fkubeconfig'%0Aalias%20ssh%3D'ssh%20-i%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fid_ed25519%20-o%20StrictHostKeyChecking%3Dno'%0Aexport%20EDITOR%3Dvi%0Aexport%20PATH%3D%24%7BPATH%7D%3A%2Fusr%2Flocal%2Fgo%2Fbin%0Aexport%20PATH%3D%24%7BPATH%7D%3A%24%7BHOME%7D%2F.local%2Fnetwork-tools%2Fdebug-scripts%0Aexport%20KUBECONFIG%3D%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeconfig%0Ased%20-i%20-e%20's%2F%20%20%20%20%20%20%2F%5Ct%2Fg'%20%24%7BHOME%7D%2F.Makefile%0A"
          }
        ]
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/worker0.yaml",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,apiVersion%3A%20v1%0Akind%3A%20Secret%0Ametadata%3A%0A%20%20name%3A%20openshift-worker-0-bmc-secret%0A%20%20namespace%3A%20openshift-machine-api%0Atype%3A%20Opaque%0Adata%3A%0A%20%20username%3A%20YWRtaW4K%0A%20%20password%3A%20cGFzc3dvcmQK%0A---%0AapiVersion%3A%20metal3.io%2Fv1alpha1%0Akind%3A%20BareMetalHost%0Ametadata%3A%0A%20%20name%3A%20openshift-worker-0%0A%20%20namespace%3A%20openshift-machine-api%0Aspec%3A%0A%20%20online%3A%20true%0A%20%20bootMACAddress%3A%2052%3A54%3A00%3A11%3A22%3Ab4%0A%20%20bmc%3A%0A%20%20%20%20address%3A%20ipmi%3A%2F%2F192.168.123.1%3A6233%0A%20%20%20%20credentialsName%3A%20openshift-worker-0-bmc-secret%0A%20%20rootDeviceHints%3A%0A%20%20%20%20deviceName%3A%20%22%2Fdev%2Fvda%22%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/worker1.yaml",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,apiVersion%3A%20v1%0Akind%3A%20Secret%0Ametadata%3A%0A%20%20name%3A%20openshift-worker-1-bmc-secret%0A%20%20namespace%3A%20openshift-machine-api%0Atype%3A%20Opaque%0Adata%3A%0A%20%20username%3A%20YWRtaW4K%0A%20%20password%3A%20cGFzc3dvcmQK%0A---%0AapiVersion%3A%20metal3.io%2Fv1alpha1%0Akind%3A%20BareMetalHost%0Ametadata%3A%0A%20%20name%3A%20openshift-worker-1%0A%20%20namespace%3A%20openshift-machine-api%0Aspec%3A%0A%20%20online%3A%20true%0A%20%20bootMACAddress%3A%2052%3A54%3A00%3A11%3A22%3Ab5%0A%20%20bmc%3A%0A%20%20%20%20address%3A%20ipmi%3A%2F%2F192.168.123.1%3A6234%0A%20%20%20%20credentialsName%3A%20openshift-worker-1-bmc-secret%0A%20%20rootDeviceHints%3A%0A%20%20%20%20deviceName%3A%20%22%2Fdev%2Fvda%22%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/99_openshift-machineconfig_99-master-core-passwd-auth.bu",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,variant%3A%20openshift%0Aversion%3A%204.x.x%0Ametadata%3A%0A%20%20labels%3A%0A%20%20%20%20machineconfiguration.openshift.io%2Frole%3A%20master%0A%20%20name%3A%2099-master-onp%0Astorage%3A%0A%20%20files%3A%0A%20%20-%20path%3A%20%2Fetc%2Fssh%2Fsshd_config.d%2F99-onp.conf%0A%20%20%20%20mode%3A%200644%0A%20%20%20%20overwrite%3A%20true%0A%20%20%20%20contents%3A%0A%20%20%20%20%20%20inline%3A%20%7C%0A%20%20%20%20%20%20%20%20PasswordAuthentication%20yes%0Asystemd%3A%0A%20%20units%3A%0A%20%20-%20name%3A%20onp.service%0A%20%20%20%20enabled%3A%20true%0A%20%20%20%20contents%3A%20%7C%0A%20%20%20%20%20%20%5BService%5D%0A%20%20%20%20%20%20Type%3Doneshot%0A%20%20%20%20%20%20ExecStart%3D%2Fusr%2Fbin%2Fsh%20-c%20'%2Fusr%2Fbin%2Fecho%20%22Core%40123%22%20%7C%20%2Fusr%2Fbin%2Fpasswd%20--stdin%20core'%0A%20%20%20%20%20%20RemainAfterExit%3Dyes%0A%20%20%20%20%20%20%5BInstall%5D%0A%20%20%20%20%20%20WantedBy%3Dmulti-user.target%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/99_openshift-machineconfig_99-worker-core-passwd-auth.bu",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,variant%3A%20openshift%0Aversion%3A%204.x.x%0Ametadata%3A%0A%20%20labels%3A%0A%20%20%20%20machineconfiguration.openshift.io%2Frole%3A%20worker%0A%20%20name%3A%2099-worker-onp%0Astorage%3A%0A%20%20files%3A%0A%20%20-%20path%3A%20%2Fetc%2Fssh%2Fsshd_config.d%2F99-onp.conf%0A%20%20%20%20mode%3A%200644%0A%20%20%20%20overwrite%3A%20true%0A%20%20%20%20contents%3A%0A%20%20%20%20%20%20inline%3A%20%7C%0A%20%20%20%20%20%20%20%20PasswordAuthentication%20yes%0Asystemd%3A%0A%20%20units%3A%0A%20%20-%20name%3A%20onp.service%0A%20%20%20%20enabled%3A%20true%0A%20%20%20%20contents%3A%20%7C%0A%20%20%20%20%20%20%5BService%5D%0A%20%20%20%20%20%20Type%3Doneshot%0A%20%20%20%20%20%20ExecStart%3D%2Fusr%2Fbin%2Fsh%20-c%20'%2Fusr%2Fbin%2Fecho%20%22Core%40123%22%20%7C%20%2Fusr%2Fbin%2Fpasswd%20--stdin%20core'%0A%20%20%20%20%20%20RemainAfterExit%3Dyes%0A%20%20%20%20%20%20%5BInstall%5D%0A%20%20%20%20%20%20WantedBy%3Dmulti-user.target%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.local/share/cockpit/openshift/deploy-cluster.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%23%20This%20script%20initiates%20an%20OpenShift%20cluster%20deployment%20in%20transient%20systemd%20service.%0Asudo%20systemd-run%20--uid%3Donp%20--unit%3Ddeploy-cluster%20--remain-after-exit%20--description%3D'OpenShift%20cluster%20deployment'%20make%20-C%20%2Fhome%2Fonp%2F%20-f%20%2Fhome%2Fonp%2F.Makefile%20deploy%20RELEASE%3D%24%7B1%7D%0Ajournalctl%20-f%20-u%20deploy-cluster.service%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.local/share/cockpit/openshift/manifest.json",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%7B%0A%20%20%22version%22%3A%200%2C%0A%20%20%22tools%22%3A%20%7B%0A%20%20%20%20%22openshift%22%3A%20%7B%0A%20%20%20%20%20%20%22label%22%3A%20%22OpenShift%22%2C%0A%20%20%20%20%20%20%22path%22%3A%20%22openshift.html%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.local/share/cockpit/openshift/openshift.html",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Ctitle%3EOpenShift%3C%2Ftitle%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%20%20%20%3Cscript%20src%3D%22..%2Fbase1%2Fcockpit.js%22%3E%3C%2Fscript%3E%0A%3C%2Fhead%3E%0A%3Cbody%20class%3D%22pf-m-redhat-font%22%3E%0A%20%20%20%20%3Cmain%20tabindex%3D%22-1%22%3E%0A%20%20%20%20%20%20%20%20%3Csection%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22app%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%3E%20OpenShift%20cluster%20credentials%20%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22passwordButton%22%3EShow%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20id%3D%22passwordResult%22%3E%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpre%20id%3D%22passwordOutput%22%3E%3C%2Fpre%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch3%3E%20Deploy%20a%20compact%20OpenShift%20cluster%20%3C%2Fh3%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22deployRelease%22%3ERelease%3C%2Flabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22deployRelease%22%20value%3D%22stable%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20for%3D%22deployToken%22%3EOCM%20Token%3C%2Flabel%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22deployToken%22%20value%3D%22%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Get%20OCM%20token%20from%20%3Ca%20href%3D%22https%3A%2F%2Fcloud.redhat.com%2Fopenshift%2Ftoken%22%20target%3D%22_blank%22%3Ehere%3C%2Fa%3E.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20OCM%20token%20is%20only%20reqired%20in%20the%20first%20deployment.%20The%20pullsecret%20will%20be%20saved%20locally.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22deployButton%22%3EDeploy%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20id%3D%22deployResult%22%3E%3C%2Fspan%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpre%20id%3D%22deployOutput%22%3E%3C%2Fpre%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3C%2Fsection%3E%0A%20%20%20%20%3C%2Fmain%3E%0A%0A%20%20%20%20%3Cscript%20src%3D%22deploy.js%22%3E%3C%2Fscript%3E%0A%20%20%20%20%3Cscript%20src%3D%22password.js%22%3E%3C%2Fscript%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.local/share/cockpit/openshift/deploy.js",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,const%20deployRelease%20%3D%20document.getElementById(%22deployRelease%22)%3B%0Aconst%20deployToken%20%3D%20document.getElementById(%22deployToken%22)%3B%0Aconst%20deployOutput%20%3D%20document.getElementById(%22deployOutput%22)%3B%0Aconst%20deployResult%20%3D%20document.getElementById(%22deployResult%22)%3B%0Aconst%20deployButton%20%3D%20document.getElementById(%22deployButton%22)%3B%0A%0Afunction%20deploy_run()%20%7B%0A%20%20%20%20%2F*%20global%20cockpit%20*%2F%0A%20%20%20%20cockpit.spawn(%5B%22%2Fhome%2Fonp%2F.local%2Fshare%2Fcockpit%2Fopenshift%2Fdeploy-cluster.sh%22%2C%20deployRelease.value%2C%20deployToken.value%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.stream(deploy_output)%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(deploy_success)%0A%20%20%20%20%20%20%20%20%20%20%20%20.catch(deploy_fail)%3B%0A%0A%20%20%20%20deployResult.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20deployOutput.innerHTML%20%3D%20%22%22%3B%0A%7D%0A%0Afunction%20deploy_success()%20%7B%0A%20%20%20%20deployResult.style.color%20%3D%20%22green%22%3B%0A%20%20%20%20deployResult.innerHTML%20%3D%20%22Deployment%20started!%22%3B%0A%7D%0A%0Afunction%20deploy_fail()%20%7B%0A%20%20%20%20deployResult.style.color%20%3D%20%22red%22%3B%0A%20%20%20%20deployResult.innerHTML%20%3D%20%22Deployment%20failed!%22%3B%0A%7D%0A%0Afunction%20deploy_output(data)%20%7B%0A%20%20%20%20deployOutput.append(document.createTextNode(data))%3B%0A%7D%0A%0A%2F%2F%20Connect%20the%20button%20to%20starting%20the%20%22deploy%22%20process%0AdeployButton.addEventListener(%22click%22%2C%20deploy_run)%3B%0A%0A%2F%2F%20Send%20a%20'init'%20message.%20%20This%20tells%20integration%20tests%20that%20we%20are%20ready%20to%20go%0Acockpit.transport.wait(function()%20%7B%20%7D)%3B%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/.local/share/cockpit/openshift/password.js",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,const%20passwordOutput%20%3D%20document.getElementById(%22passwordOutput%22)%3B%0Aconst%20passwordResult%20%3D%20document.getElementById(%22passwordResult%22)%3B%0Aconst%20passwordButton%20%3D%20document.getElementById(%22passwordButton%22)%3B%0A%0Afunction%20password_run()%20%7B%0A%20%20%20%20%2F*%20global%20cockpit%20*%2F%0A%20%20%20%20cockpit.spawn(%5B%22cat%22%2C%20%22%2Fhome%2Fonp%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeadmin-password%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.stream(password_output)%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(password_success)%0A%20%20%20%20%20%20%20%20%20%20%20%20.catch(password_fail)%3B%0A%0A%20%20%20%20passwordResult.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20passwordOutput.innerHTML%20%3D%20%22%22%3B%0A%7D%0A%0Afunction%20password_success()%20%7B%0A%20%20%20%20passwordResult.style.color%20%3D%20%22green%22%3B%0A%20%20%20%20passwordResult.innerHTML%20%3D%20%22Found%20kubeadmin%20password!%22%3B%0A%7D%0A%0Afunction%20password_fail()%20%7B%0A%20%20%20%20passwordResult.style.color%20%3D%20%22red%22%3B%0A%20%20%20%20passwordResult.innerHTML%20%3D%20%22No%20credentials!%22%3B%0A%7D%0A%0Afunction%20password_output(data)%20%7B%0A%20%20%20%20passwordOutput.append(document.createTextNode(data))%3B%0A%7D%0A%0A%2F%2F%20Connect%20the%20button%20to%20starting%20the%20%22show%22%20process%0ApasswordButton.addEventListener(%22click%22%2C%20password_run)%3B%0A%0A%2F%2F%20Send%20a%20'init'%20message.%20%20This%20tells%20integration%20tests%20that%20we%20are%20ready%20to%20go%0Acockpit.transport.wait(function()%20%7B%20%7D)%3B%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/sno.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,set%20-euo%20pipefail%0A%0AONPDIR%3D%22%24(%20cd%20--%20%22%24(%20dirname%20--%20%22%24%7BBASH_SOURCE%5B0%5D%3A-%240%7D%22%3B%20)%22%20%26%3E%20%2Fdev%2Fnull%20%26%26%20pwd%202%3E%20%2Fdev%2Fnull%3B%20)%22%0Aexport%20VERSION%3D%24%7B1%7D%0Arm%20-rf%20%24%7BONPDIR%7D%2Fsno%0Arm%20-rf%20%24%7BONPDIR%7D%2Fsno.yaml%0Aecho%20%22Downloading%20oc%20binary%20...%22%0Acurl%20-s%20https%3A%2F%2Fmirror.openshift.com%2Fpub%2Fopenshift-v4%2Fclients%2Focp%2F%24VERSION%2Fopenshift-client-linux.tar.gz%20%7C%20tar%20zxf%20-%20-C%20%24%7BONPDIR%7D%20oc%0Asudo%20mv%20%24%7BONPDIR%7D%2Foc%20%2Fusr%2Flocal%2Fbin%0Aecho%20%22%E2%9C%94%20Downloaded!%22%0Aecho%20%22Downloading%20openshift-install%20binary%20...%22%0Acurl%20-s%20https%3A%2F%2Fmirror.openshift.com%2Fpub%2Fopenshift-v4%2Fclients%2Focp%2F%24VERSION%2Fopenshift-install-linux.tar.gz%20%7C%20tar%20zxf%20-%20-C%20%24%7BONPDIR%7D%20openshift-install%0Asudo%20mv%20%24%7BONPDIR%7D%2Fopenshift-install%20%2Fusr%2Flocal%2Fbin%0Aecho%20%22%E2%9C%94%20Downloaded!%22%0Aecho%20%22Downloading%20RHCOS%20ISO%20...%22%0Asudo%20mkdir%20-p%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Fsno%0Asudo%20curl%20-sLo%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Frhcos-live.iso%20%24(%2Fusr%2Flocal%2Fbin%2Fopenshift-install%20coreos%20print-stream-json%20%7C%20grep%20location%20%7C%20grep%20x86_64%20%7C%20grep%20iso%20%7C%20cut%20-d%5C%22%20-f4)%0Aecho%20%22%E2%9C%94%20Downloaded!%22%0Aecho%20%22Generating%20install-config.yaml%20file%20...%22%0Acat%20%3C%3C%20EOF%20%3E%20%24%7BONPDIR%7D%2Fsno.yaml%0AapiVersion%3A%20v1%0AbaseDomain%3A%20example.local%0Ametadata%3A%0A%20%20name%3A%20sno%0Anetworking%3A%0A%20%20machineNetwork%3A%0A%20%20-%20cidr%3A%20fd00%3Adead%3Abeef%3A%3A%2F96%0A%20%20clusterNetwork%3A%0A%20%20-%20cidr%3A%20fd01%3A%3A%2F48%0A%20%20%20%20hostPrefix%3A%2064%0A%20%20serviceNetwork%3A%0A%20%20%20%20-%20fd02%3A%3A%2F112%0A%20%20networkType%3A%20OVNKubernetes%0Acompute%3A%0A-%20name%3A%20worker%0A%20%20replicas%3A%200%0AcontrolPlane%3A%0A%20%20name%3A%20master%0A%20%20replicas%3A%201%0Aplatform%3A%0A%20%20none%3A%20%7B%7D%0AbootstrapInPlace%3A%0A%20%20installationDisk%3A%20%2Fdev%2Fsda%0ApullSecret%3A%20'%24(cat%20%24%7BONPDIR%7D%2Fpullsecret)'%0AsshKey%3A%20'%24(cat%20%24%7BONPDIR%7D%2Fid_ed25519.pub)'%0AEOF%0Aecho%20%22%E2%9C%94%20Generated!%22%0Amkdir%20-p%20%24%7BONPDIR%7D%2Fsno%0Aecho%20%22Copying%20install-config.yaml%20file%20to%20the%20installation%20directory%20...%22%0Acp%20%24%7BONPDIR%7D%2Fsno.yaml%20%24%7BONPDIR%7D%2Fsno%2Finstall-config.yaml%0Aecho%20%22%E2%9C%94%20Copied!%22%0Asudo%20virsh%20-q%20destroy%20sno%202%3E%2Fdev%2Fnull%20%7C%7C%20true%0Asudo%20virsh%20-q%20undefine%20sno%202%3E%2Fdev%2Fnull%20%7C%7C%20true%0Asudo%20rm%20-f%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Fsno.img%0Asudo%20qemu-img%20create%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Fsno%2Fsno.img%20120G%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/sno-restart.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%0Afunction%20WAIT_FOR_REBOOT%20%7B%0Asp%3D'%2F-%5C%7C'%0Asc%3D0%0A%0Aspin()%20%7B%0A%20%20%20printf%20%22%5Cr%5B%24%7Bsp%3Asc%2B%2B%3A1%7D%5D%20%241%22%0A%20%20%20((sc%3D%3D%24%7B%23sp%7D))%20%26%26%20sc%3D0%0A%7D%0A%0Aendspin()%20%7B%0A%20%20%20printf%20%22%5Cr%25s%5Cn%22%20%22%24%40%22%0A%7D%0A%0Auntil%20%5B%5B%20%24(sudo%20virsh%20-q%20list%20%7C%20grep%20-o%20sno%20%7C%20wc%20-c)%20-eq%200%20%5D%5D%0Ado%20spin%20%22Waiting%20for%20the%20installation%20and%20restart%20...%22%0Asleep%200.5%0Adone%0Aendspin%0A%7D%0A%0Afunction%20START_NODE%20%7B%0A%20%20%20%20%20%20%20%20sudo%20virsh%20start%20sno%20%3E%20%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20echo%20%22%5B%E2%9C%94%5D%20Installation%20completed!%22%0A%7D%0A%0AWAIT_FOR_REBOOT%0ASTART_NODE%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/enp1s0.nmconnection",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%5Bconnection%5D%0Aid%3Dens3%0Atype%3Dethernet%0Aautoconnect%3Dyes%0Ainterface-name%3Denp1s0%0A%5Bipv4%5D%0Amethod%3Ddisabled%0A%5Bipv6%5D%0Amethod%3Dmanual%0Aaddresses%3Dfd00%3Adead%3Abeef%3A%3A2%2F96%0Adns%3Dfd00%3Adead%3Abeef%3A%3A1%0Agateway%3Dfd00%3Adead%3Abeef%3A%3A1%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/fcos.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0Aset%20-exuo%20pipefail%0ADIR%3D%2Fopt%2Fopenshift-network-playground%2Flibvirt%2Ffcos%0A%0Afunction%20downloadImage%20%7B%0A%20%20%20%20%20%20%20%20sudo%20mkdir%20-p%20%24%7BDIR%7D%0A%20%20%20%20%20%20%20%20STREAM%3D%22stable%22%0A%20%20%20%20%20%20%20%20sudo%20podman%20run%20--pull%3Dalways%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--rm%20-v%20%24%7BDIR%7D%3A%2Fdata%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--workdir%20%2Fdata%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20quay.io%2Fcoreos%2Fcoreos-installer%3Arelease%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20download%20-s%20%24%7BSTREAM%7D%20-p%20qemu%20-f%20qcow2.xz%20--decompress%0A%7D%0A%0Afunction%20createButane%20%7B%0Acat%20%3C%3C%20EOF%20%7C%20sudo%20tee%20%24%7BDIR%7D%2Ffcos.bu%0Avariant%3A%20fcos%0Aversion%3A%201.4.0%0Apasswd%3A%0A%20%20users%3A%0A%20%20%20%20-%20name%3A%20core%0A%20%20%20%20%20%20groups%3A%0A%20%20%20%20%20%20%20%20-%20wheel%0A%20%20%20%20%20%20%20%20-%20sudo%0A%20%20%20%20%20%20password_hash%3A%20%5C%24y%5C%24j9T%5C%249NWuGa4oxrKeZ6T8eo8Ef1%5C%24cEQV6UhM1XvR2sfUvSwKs.BTmYNut3VRP33%2Fc5qfw35%0AEOF%0A%7D%0A%0Afunction%20createIgnition%20%7B%0A%20%20%20%20%20%20%20%20sudo%20podman%20run%20--interactive%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--rm%20quay.io%2Fcoreos%2Fbutane%3Arelease%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--pretty%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--strict%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%20%24%7BDIR%7D%2Ffcos.bu%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%20sudo%20tee%20%24%7BDIR%7D%2Ffcos.ign%0A%7D%0A%0Afunction%20createVirtualMachine%20%7B%0A%20%20%20%20%20%20%20%20IGNITION_CONFIG%3D%22%24%7BDIR%7D%2Ffcos.ign%22%0A%20%20%20%20%20%20%20%20IMAGE%3D%22%24%7BDIR%7D%2Ffedora*.qcow2%22%0A%20%20%20%20%20%20%20%20DISK%3D%22%24%7BDIR%7D%2Ffcos.qcow2%22%0A%20%20%20%20%20%20%20%20VM_NAME%3D%22fcos%22%0A%20%20%20%20%20%20%20%20VCPUS%3D%222%22%0A%20%20%20%20%20%20%20%20RAM_MB%3D%222048%22%0A%20%20%20%20%20%20%20%20STREAM%3D%22stable%22%0A%20%20%20%20%20%20%20%20DISK_GB%3D%2210%22%0A%20%20%20%20%20%20%20%20IGNITION_DEVICE_ARG%3D(--qemu-commandline%3D%22-fw_cfg%20name%3Dopt%2Fcom.coreos%2Fconfig%2Cfile%3D%24%7BIGNITION_CONFIG%7D%22)%0A%0A%20%20%20%20%20%20%20%20sudo%20cp%20%24%7BDIR%7D%2Ffedora-coreos-*%20%24%7BDIR%7D%2Ffcos.qcow2%0A%20%20%20%20%20%20%20%20sudo%20virsh%20destroy%20fcos%20%3E%20%2Fdev%2Fnull%202%3E%261%20%7C%7C%20%3A%0A%20%20%20%20%20%20%20%20sudo%20virsh%20undefine%20fcos%20%3E%20%2Fdev%2Fnull%202%3E%261%20%7C%7C%20%3A%0A%20%20%20%20%20%20%20%20sudo%20virt-install%20--connect%3D%22qemu%3A%2F%2F%2Fsystem%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--name%3D%24%7BVM_NAME%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--vcpus%3D%24%7BVCPUS%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--memory%3D%24%7BRAM_MB%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--pxe%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--boot%20menu%3Don%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--os-variant%3Dfedora-coreos-%24%7BSTREAM%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--import%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--graphics%20spice%2Clisten%3D0.0.0.0%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--noautoconsole%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--disk%3Dsize%3D%24%7BDISK_GB%7D%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--network%20network%3Ddefault%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%24%7BIGNITION_DEVICE_ARG%5B%40%5D%7D%22%0A%20%20%20%20%20%20%20%20watch%20sudo%20virsh%20domifaddr%20fcos%0A%7D%0A%0Afunction%20main%20%7B%0A%20%20%20%20%20%20%20%20downloadImage%0A%20%20%20%20%20%20%20%20createButane%0A%20%20%20%20%20%20%20%20createIgnition%0A%20%20%20%20%20%20%20%20createVirtualMachine%0A%7D%0A%0Amain%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/store-release.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0ARELEASE%3D%241%0A%0Afunction%20check_release()%20%7B%0A%20%20%20%20%20%20%20%20if%20%5B%20-d%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Directory%20named%20%24RELEASE%20exists.%20It%20will%20be%20replaced.%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20read%20-r%20-p%20%22Do%20you%20want%20to%20continue%3F%20%5By%2FN%5D%20%22%20response%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%22%24response%22%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5ByY%5D%5BeE%5D%5BsS%5D%7C%5ByY%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Removing%20files...%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20rm%20-rf%20%2Fopt%2Fopenshift-network-playground%2F%24RELEASE%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20exit%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20esac%0A%20%20%20%20%20%20%20%20fi%0A%7D%0A%0Afunction%20wait_for_shutdown()%20%7B%0A%20%20%20%20%20%20%20%20sp%3D'%2F-%5C%7C'%0A%20%20%20%20%20%20%20%20sc%3D0%0A%0A%20%20%20%20%20%20%20%20spin()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printf%20%22%5Cr%5B%24%7Bsp%3Asc%2B%2B%3A1%7D%5D%20%241%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20((sc%3D%3D%24%7B%23sp%7D))%20%26%26%20sc%3D0%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20endspin()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printf%20%22%5Cr%25s%5Cn%22%20%22%24%40%22%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20until%20%5B%5B%20%24(sudo%20virsh%20-q%20list%202%3E%2Fdev%2Fnull%20%7C%20grep%20-o%20master%20%7C%20wc%20-c)%20-eq%200%20%5D%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20do%20spin%20%22Waiting%20for%20the%20shutdown%20...%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sleep%200.5%0A%20%20%20%20%20%20%20%20done%0A%20%20%20%20%20%20%20%20endspin%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20%20%20%20%20if%20%5B%5B%20%24(sudo%20virsh%20-q%20list%202%3E%2Fdev%2Fnull%20%7C%20grep%20-o%20master%20%7C%20wc%20-c)%20!%3D%200%20%5D%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20node%20in%20%24(oc%20get%20nodes%20-o%20jsonpath%3D'%7B.items%5B*%5D.metadata.name%7D')%3B%20do%20ssh%20-i%20openshift-network-playground%2Fid_ed25519%20-o%20UserKnownHostsFile%3D%2Fdev%2Fnull%20-o%20StrictHostKeyChecking%3Dno%20core%40%24%7Bnode%7D%20--%20sudo%20shutdown%20-h%201%3B%20done%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wait_for_shutdown%0A%20%20%20%20%20%20%20%20fi%0A%0A%20%20%20%20%20%20%20%20sudo%20mkdir%20-p%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%0A%7D%0A%0Afunction%20store_release()%20%7B%0A%20%20%20%20%20%20%20%20for%20i%20in%20master0%20master1%20master2%3B%0A%20%20%20%20%20%20%20%20do%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%5B%20!%20-f%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%24i%2F%24i.img%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20sudo%20mkdir%20-p%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%24i%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20cp%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2F%24i%2F%24i.img%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%24i%2F%24i.img%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Copied%20%24i.img!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fi%0A%20%20%20%20%20%20%20%20done%0A%20%20%20%20%20%20%20%20if%20%5B%20!%20-f%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2Fkubeconfig%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20cp%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeconfig%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Copied%20kubeconfig!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20cp%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeadmin-password%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22Copied%20kubeadmin-password!%22%0A%20%20%20%20%20%20%20%20fi%0A%7D%0A%0Acheck_release%0Asetup%0Astore_release%0A"
        },
        "mode": 493
      },
      {
        "group": {
          "name": "onp"
        },
        "overwrite": true,
        "path": "/home/onp/openshift-network-playground/restore-release.sh",
        "user": {
          "name": "onp"
        },
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0A%0ARELEASE%3D%24%7B1%7D%0A%0Afunction%20download_oc()%20%7B%0A%20%20%20%20%20%20%20%20echo%20%22Downloading%20oc%20binary%20...%22%0A%20%20%20%20%20%20%20%20curl%20-%23%20https%3A%2F%2Fmirror.openshift.com%2Fpub%2Fopenshift-v4%2Fclients%2Focp%2F%24RELEASE%2Fopenshift-client-linux.tar.gz%20%7C%20tar%20xzf%20%2Fdev%2Fstdin%20oc%0A%20%20%20%20%20%20%20%20sudo%20mv%20oc%20%2Fusr%2Flocal%2Fbin%2F%0A%20%20%20%20%20%20%20%20echo%20%22%E2%9C%94%20Downloaded!%22%0A%7D%0A%0Afunction%20setup()%20%7B%0A%20%20%20%20%20%20%20%20sudo%20systemctl%20restart%20dhcp%0A%7D%0A%0Afunction%20restore_release()%20%7B%0A%20%20%20%20%20%20%20%20for%20i%20in%20master0%20master1%20master2%3B%0A%20%20%20%20%20%20%20%20do%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%5B%20-f%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%24i%2F%24i.img%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20destroy%20%24i%202%3E%2Fdev%2Fnull%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20cp%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%24i%2F%24i.img%20%2Fopt%2Fopenshift-network-playground%2Flibvirt%2F%24i%2F%24i.img%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20virsh%20-q%20start%20%24i%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22%24i%20started!%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22No%20%24i.img%20file%20in%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%24i%2F%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fi%0A%20%20%20%20%20%20%20%20done%0A%20%20%20%20%20%20%20%20if%20%5B%20-f%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2Fkubeconfig%20%5D%3B%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mkdir%20-p%20openshift-network-playground%2Fclusterconfigs%2Fauth%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20cp%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2Fkubeconfig%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeconfig%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20chown%20onp%3Aonp%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeconfig%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20cp%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2Fkubeadmin-password%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeadmin-password%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sudo%20chown%20onp%3Aonp%20%24%7BHOME%7D%2Fopenshift-network-playground%2Fclusterconfigs%2Fauth%2Fkubeadmin-password%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20download_oc%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20echo%20%22No%20kubeconfig%20file%20in%20%2Fopt%2Fopenshift-network-playground%2F%24%7BRELEASE%7D%2F%22%0A%20%20%20%20%20%20%20%20fi%0A%7D%0A%0Arestore_release%0Asetup%0A"
        },
        "mode": 493
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "enabled": false,
        "mask": true,
        "name": "systemd-resolved.service"
      },
      {
        "enabled": false,
        "name": "zincati.service"
      },
      {
        "enabled": true,
        "name": "libvirtd.socket"
      },
      {
        "contents": "[Unit]\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=oneshot\nExecStart=/opt/openshift-network-playground/host/configure.sh\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "host-configure.service"
      },
      {
        "contents": "[Unit]\nWants=libvirtd.socket\nAfter=libvirtd.socket\nRequires=libvirtd.socket\nConditionPathExists=!/opt/openshift-network-playground/master0.done\n\n[Service]\nTimeout=0\nType=oneshot\nExecStart=/opt/openshift-network-playground/libvirt/create-vm.sh master0 52:54:00:11:22:b1 52:54:00:11:22:a1\nExecStartPost=/usr/bin/touch /opt/openshift-network-playground/master0.done\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "master0.service"
      },
      {
        "contents": "[Unit]\nWants=libvirtd.socket\nAfter=libvirtd.socket\nRequires=libvirtd.socket\nConditionPathExists=!/opt/openshift-network-playground/master1.done\n\n[Service]\nTimeout=0\nType=oneshot\nExecStart=/opt/openshift-network-playground/libvirt/create-vm.sh master1 52:54:00:11:22:b2 52:54:00:11:22:a2\nExecStartPost=/usr/bin/touch /opt/openshift-network-playground/master1.done\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "master1.service"
      },
      {
        "contents": "[Unit]\nWants=libvirtd.socket\nAfter=libvirtd.socket\nRequires=libvirtd.socket\nConditionPathExists=!/opt/openshift-network-playground/master2.done\n\n[Service]\nTimeout=0\nType=oneshot\nExecStart=/opt/openshift-network-playground/libvirt/create-vm.sh master2 52:54:00:11:22:b3 52:54:00:11:22:a3\nExecStartPost=/usr/bin/touch /opt/openshift-network-playground/master2.done\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "master2.service"
      },
      {
        "contents": "[Unit]\nWants=libvirtd.socket\nAfter=libvirtd.socket\nRequires=libvirtd.socket\nConditionPathExists=!/opt/openshift-network-playground/worker0.done\n\n[Service]\nTimeout=0\nType=oneshot\nExecStart=/opt/openshift-network-playground/libvirt/create-vm.sh worker0 52:54:00:11:22:b4 52:54:00:11:22:a4 2 8192\nExecStartPost=/usr/bin/touch /opt/openshift-network-playground/worker0.done\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "worker0.service"
      },
      {
        "contents": "[Unit]\nWants=libvirtd.socket\nAfter=libvirtd.socket\nRequires=libvirtd.socket\nConditionPathExists=!/opt/openshift-network-playground/worker1.done\n\n[Service]\nTimeout=0\nType=oneshot\nExecStart=/opt/openshift-network-playground/libvirt/create-vm.sh worker1 52:54:00:11:22:b5 52:54:00:11:22:a5 2 8192\nExecStartPost=/usr/bin/touch /opt/openshift-network-playground/worker1.done\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "worker1.service"
      },
      {
        "contents": "[Unit]\nDescription=Webserver for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=on-failure\nTimeoutStopSec=70\nExecStartPre=/bin/rm -f %t/%n.ctr-id\nExecStart=/usr/bin/podman run \\\n        --cidfile=%t/%n.ctr-id \\\n        --cgroups=no-conmon \\\n        --rm \\\n        --sdnotify=conmon \\\n        --replace \\\n        --detach \\\n        --net host \\\n        --name webserver \\\n        -v /home/onp/openshift-network-playground/rhcos_image_cache:/var/www/html quay.io/centos7/httpd-24-centos7:latest\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": true,
        "name": "webserver.service"
      },
      {
        "contents": "[Unit]\nDescription=vbmc for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStopSec=70\nTimeoutStartSec=600\nExecStartPre=/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/rm -vf /opt/openshift-network-playground/vbmc/config/master.pid\nExecStart=/usr/bin/podman run \\\n        --cidfile=%t/%n.ctr-id \\\n        --cgroups=no-conmon \\\n        --rm \\\n        --sdnotify=conmon \\\n        --replace \\\n        -d \\\n        -ti \\\n        --name vbmc \\\n        --net host \\\n        --volume \"/opt/openshift-network-playground/vbmc/config:/root/.vbmc\" \\\n        --volume \"/opt/openshift-network-playground/vbmc/ssh:/root/.ssh\" \\\n        quay.io/metal3-io/vbmc\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": true,
        "name": "vbmc.service"
      },
      {
        "contents": "[Unit]\nDescription=DHCP for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/dhcp /opt/openshift-network-playground/dhcp\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name dhcp -d --net host --cap-add NET_ADMIN,NET_RAW localhost/dhcp\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": true,
        "name": "dhcp.service"
      },
      {
        "contents": "[Unit]\nDescription=DHCP for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/onp1-dhcp /opt/openshift-network-playground/onp1-dhcp\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name onp1-dhcp -d --net host --cap-add NET_ADMIN,NET_RAW localhost/onp1-dhcp\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": false,
        "name": "onp1-dhcp.service"
      },
      {
        "contents": "[Unit]\nDescription=DHCP for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/onp2-dhcp /opt/openshift-network-playground/onp2-dhcp\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name onp2-dhcp -d --net host --cap-add NET_ADMIN,NET_RAW localhost/onp2-dhcp\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": false,
        "name": "onp2-dhcp.service"
      },
      {
        "contents": "[Unit]\nDescription=PXE for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/pxe /opt/openshift-network-playground/pxe\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name pxe -d --net host --cap-add NET_ADMIN,NET_RAW localhost/pxe\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": false,
        "name": "pxe.service"
      },
      {
        "contents": "[Unit]\nDescription=Check containers status\nAfter=selinux-configure.service\n\n[Service]\nTimeout=0\nType=oneshot\nExecStart=/opt/openshift-network-playground/host/broadcast.sh\nRemainAfterExit=yes\n\n[Install]\nWantedBy=basic.target\n",
        "enabled": true,
        "name": "broadcast.service"
      },
      {
        "contents": "[Unit]\nDescription=NAT64 for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/nat64 /opt/openshift-network-playground/nat64\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name nat64 --detach --net host --privileged localhost/nat64\nExecStartPost=/opt/openshift-network-playground/nat64/host.sh\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": true,
        "name": "nat64.service"
      },
      {
        "contents": "[Unit]\nDescription=DNS64 for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/dns64 /opt/openshift-network-playground/dns64\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name dns64 -d --net host --cap-add NET_ADMIN,NET_RAW localhost/dns64\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": true,
        "name": "dns64.service"
      },
      {
        "contents": "[Unit]\nDescription=Proxy for openshift-network-playground\nWants=network-online.target\nAfter=network-online.target\nRequiresMountsFor=%t/containers\n\n[Service]\nEnvironment=PODMAN_SYSTEMD_UNIT=%n\nRestart=always\nTimeoutStartSec=180\nTimeoutStopSec=70\nExecStartPre=-/usr/bin/rm -f %t/%n.ctr-id\nExecStartPre=/usr/bin/podman build --net host --tag localhost/proxy /opt/openshift-network-playground/proxy\nExecStart=/usr/bin/podman run --cidfile=%t/%n.ctr-id --cgroups=no-conmon --rm --sdnotify=conmon --name proxy -d --net host --volume /opt/openshift-network-playground/proxy/certs:/etc/squid-cert --cap-add NET_ADMIN,NET_RAW localhost/proxy\nExecStop=/usr/bin/podman stop --ignore --cidfile=%t/%n.ctr-id\nExecStopPost=/usr/bin/podman rm -f --ignore --cidfile=%t/%n.ctr-id\nType=notify\nNotifyAccess=all\n\n[Install]\nWantedBy=default.target\n",
        "enabled": true,
        "name": "proxy.service"
      }
    ]
  }
}
